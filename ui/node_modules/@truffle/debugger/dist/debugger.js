!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Debugger",[],t):"object"==typeof exports?exports.Debugger=t():e.Debugger=t()}(global,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(2));t.isDeliberatelySkippedNodeType=l,t.isSkippedNodeType=function(e){return l(e)||["VariableDeclarationStatement","Mapping","Block","InlineAssembly","YulTypedName"].includes(e.nodeType)||e.nodeType.includes("TypeName")||void 0!==e.typeDescriptions&&"stringliteral"===a.Ast.Utils.typeClass(e)},t.prefixName=function(e,t){return Object.defineProperty(t,"name",{value:`${e}.${t.name}`,configurable:!0}),t},t.makePath=function(e,t){return`${e}:${t}`},t.popNWhere=function(e,t,n){let r=e.slice();for(;t>0&&r.length>0;){let e=r[r.length-1];n(e)&&t--,r.pop()}return r},t.keccak256=s,t.stableKeccak256=c,t.makeAssignment=function(e,t){let n=c(e);return(0,r.default)({},e,{id:n,ref:t})},t.isCallMnemonic=function(e){return["CALL","DELEGATECALL","STATICCALL","CALLCODE"].includes(e)},t.isShortCallMnemonic=function(e){return["DELEGATECALL","STATICCALL"].includes(e)},t.isDelegateCallMnemonicBroad=function(e){return["DELEGATECALL","CALLCODE"].includes(e)},t.isDelegateCallMnemonicStrict=function(e){return["DELEGATECALL"].includes(e)},t.isStaticCallMnemonic=function(e){return["STATICCALL"].includes(e)},t.isCreateMnemonic=function(e){return["CREATE","CREATE2"].includes(e)};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),i=o(n(45));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return["ContractDefinition","VariableDeclaration","YulVariableDeclaration","YulBlock"].includes(e.nodeType)}function s(...e){return a.Conversion.toHexString(a.Evm.Utils.keccak256(...e),a.Evm.Utils.WORD_SIZE)}function c(e){return s({type:"string",value:(0,i.default)(e)})}},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t){e.exports=require("@truffle/codec")},function(e,t){e.exports=require("reselect-tree")},function(e,t){e.exports=require("redux-saga/effects")},function(e,t){e.exports=require("babel-runtime/core-js/object/entries")},function(e,t){e.exports=require("redux")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);const a={depth:-1,error:"",gas:0,memory:[],stack:[],storage:{},gasCost:0,op:"STOP",pc:-1};let i=(0,r.createSelectorTree)({index:e=>e.trace.proc.index,loaded:(0,r.createLeaf)(["/steps"],e=>null!==e),finished:e=>e.trace.proc.finished,finishedOrUnloaded:(0,r.createLeaf)(["/finished","/loaded"],(e,t)=>e||!t),steps:e=>e.trace.transaction.steps,stepsRemaining:(0,r.createLeaf)(["./steps","./index"],(e,t)=>e.length-t),step:(0,r.createLeaf)(["./steps","./index"],(e,t)=>e?e.length>0?e[t]:a:null),next:(0,r.createLeaf)(["./steps","./index"],(e,t)=>t<e.length-1?e[t+1]:a),nextOfSameDepth:(0,r.createLeaf)(["./steps","./index"],(e,t)=>{let n=e[t].depth;return e.slice(t+1).find(e=>e.depth===n)}),application:{submoduleCount:e=>e.trace.application.submoduleCount}});t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(6)),a=f(n(11)),i=f(n(2)),o=f(n(0)),l=n(4),s=f(n(17)),c=f(n(8)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}(0,o.default)("debugger:evm:selectors");const p="00".repeat(u.Evm.Utils.WORD_SIZE);function y({address:e,binary:t},n,r,a){let o,l=Boolean(t);if(e)({context:o,binary:t}=n[e]);else{if(!l)return null;o=r(t)}if(null!=o){let e=a[o];return(0,i.default)({},e,{binary:t})}return{binary:t,isConstructor:l}}function m(e,t=null){let n={trace:(0,l.createLeaf)([e],e=>{if(!e)return null;let{gasCost:t,op:n,pc:r}=e;return{gasCost:t,op:n,pc:r}}),programCounter:(0,l.createLeaf)(["./trace"],e=>e?e.pc:null),isCall:(0,l.createLeaf)(["./trace"],e=>(0,d.isCallMnemonic)(e.op)),isShortCall:(0,l.createLeaf)(["./trace"],e=>(0,d.isShortCallMnemonic)(e.op)),isDelegateCallBroad:(0,l.createLeaf)(["./trace"],e=>(0,d.isDelegateCallMnemonicBroad)(e.op)),isDelegateCallStrict:(0,l.createLeaf)(["./trace"],e=>(0,d.isDelegateCallMnemonicStrict)(e.op)),isStaticCall:(0,l.createLeaf)(["./trace"],e=>(0,d.isStaticCallMnemonic)(e.op)),isCreate:(0,l.createLeaf)(["./trace"],e=>(0,d.isCreateMnemonic)(e.op)),isCreate2:(0,l.createLeaf)(["./trace"],e=>"CREATE2"===e.op),isStore:(0,l.createLeaf)(["./trace"],e=>"SSTORE"===e.op),isLoad:(0,l.createLeaf)(["./trace"],e=>"SLOAD"===e.op),touchesStorage:(0,l.createLeaf)(["./isStore","isLoad"],(e,t)=>e||t)};if(t){(e=>"string"==typeof e&&(e.startsWith("./")||e.startsWith("../")))(t)&&(t="../"+t),(0,a.default)(n,{isJump:(0,l.createLeaf)(["./trace",t],(e,{stack:t})=>"JUMP"===e.op||"JUMPI"===e.op&&t[t.length-2]!==p),valueStored:(0,l.createLeaf)(["./isStore",t],(e,{stack:t})=>e?t[t.length-2]:null),callAddress:(0,l.createLeaf)(["./isCall",t],(e,{stack:t})=>{if(!e)return null;let n=t[t.length-2];return u.Evm.Utils.toAddress(n)}),createBinary:(0,l.createLeaf)(["./isCreate",t],(e,{stack:t,memory:n})=>{if(!e)return null;const r=2*parseInt(t[t.length-2],16),a=2*parseInt(t[t.length-3],16);return"0x"+n.join("").substring(r,r+a).padEnd(a,"00")}),callData:(0,l.createLeaf)(["./isCall","./isShortCall",t],(e,t,{stack:n,memory:r})=>{if(!e)return null;let a=t?1:0;const i=2*parseInt(n[n.length-4+a],16),o=2*parseInt(n[n.length-5+a],16);return"0x"+r.join("").substring(i,i+o).padEnd(o,"00")}),callValue:(0,l.createLeaf)(["./isCall","./isDelegateCallStrict","./isStaticCall",t],(e,t,n,{stack:r})=>{if(!e||t)return null;if(n)return new s.default(0);let a=r[r.length-3];return u.Conversion.toBN(a)}),createValue:(0,l.createLeaf)(["./isCreate",t],(e,{stack:t})=>{if(!e)return null;let n=t[t.length-1];return u.Conversion.toBN(n)}),storageAffected:(0,l.createLeaf)(["./touchesStorage",t],(e,{stack:t})=>e?t[t.length-1]:null),callContext:(0,l.createLeaf)(["./callAddress","./createBinary","/current/codex/instances","/info/binaries/search","/info/contexts"],(e,t,n,r,a)=>y({address:e,binary:t},n,r,a))})}return n}const g=(0,l.createSelectorTree)({state:e=>e.evm,info:{contexts:(0,l.createLeaf)(["/state"],e=>e.info.contexts.byContext),binaries:{search:(0,l.createLeaf)(["/info/contexts"],e=>t=>u.Contexts.Utils.findDebuggerContext(e,t))}},transaction:{globals:{tx:(0,l.createLeaf)(["/state"],e=>e.transaction.globals.tx),block:(0,l.createLeaf)(["/state"],e=>e.transaction.globals.block)},status:(0,l.createLeaf)(["/state"],e=>e.transaction.status),initialCall:(0,l.createLeaf)(["/state"],e=>e.transaction.initialCall),startingContext:(0,l.createLeaf)(["/current/callstack","/current/codex/instances","/info/binaries/search","/info/contexts"],(e,t,n,r)=>e.length>0?y(e[0],t,n,r):null)},current:{callstack:e=>e.evm.proc.callstack,call:(0,l.createLeaf)(["./callstack"],e=>e.length?e[e.length-1]:{}),context:(0,l.createLeaf)(["./call","./codex/instances","/info/binaries/search","/info/contexts"],y),state:(0,a.default)({},...["depth","error","gas","memory","stack","storage"].map(e=>({[e]:(0,l.createLeaf)([c.default.step],t=>t[e])}))),step:(0,i.default)({},m(c.default.step,"./state"),{createdAddress:(0,l.createLeaf)(["./isCreate","/nextOfSameDepth/state/stack","./isCreate2","./create2Address"],(e,t,n,r)=>{if(!e)return null;let a=u.Evm.Utils.toAddress(t[t.length-1]);return a===u.Evm.Utils.ZERO_ADDRESS&&n?r:a}),create2Address:(0,l.createLeaf)(["./isCreate2","./createBinary","../call","../state/stack"],(e,t,{storageAddress:n},r)=>e?u.Evm.Utils.toAddress("0x"+(0,d.keccak256)({type:"bytes",value:"0xff"+n.slice(2)+r[r.length-4]+(0,d.keccak256)({type:"bytes",value:t}).slice(2)}).slice(2+2*(u.Evm.Utils.WORD_SIZE-u.Evm.Utils.ADDRESS_SIZE))):null),isInstantCallOrCreate:(0,l.createLeaf)(["./isCall","./isCreate","./isContextChange"],(e,t,n)=>(e||t)&&!n),isContextChange:(0,l.createLeaf)(["/current/state/depth","/next/state/depth"],(e,t)=>e!==t),isNormalHalting:(0,l.createLeaf)(["./isHalting","./returnStatus"],(e,t)=>e&&t),isHalting:(0,l.createLeaf)(["/current/state/depth","/next/state/depth",c.default.stepsRemaining],(e,t,n)=>t<e||0===n),isExceptionalHalting:(0,l.createLeaf)(["./isHalting","./returnStatus"],(e,t)=>e&&!t),returnStatus:(0,l.createLeaf)(["./isHalting","/next/state",c.default.stepsRemaining,"/transaction/status"],(e,{stack:t},n,r)=>e?n<=1?r:t[t.length-1]!==p:null),returnValue:(0,l.createLeaf)(["./trace","./isExceptionalHalting","../state"],(e,t,{stack:n,memory:r})=>{if("RETURN"!==e.op&&"REVERT"!==e.op)return"0x";if(t&&"REVERT"!==e.op)return"0x";const a=2*parseInt(n[n.length-1],16),i=2*parseInt(n[n.length-2],16);return"0x"+r.join("").substring(a,a+i).padEnd(i,"00")}),valueLoaded:(0,l.createLeaf)(["./isLoad","/next/state"],(e,{stack:t})=>e?t[t.length-1]:null)}),codex:{_:(0,l.createLeaf)(["/state"],e=>e.proc.codex),storage:(0,l.createLeaf)(["./_","../state/storage","../call"],(e,t,{storageAddress:n})=>n===u.Evm.Utils.ZERO_ADDRESS?t:e[e.length-1].accounts[n].storage),instances:(0,l.createLeaf)(["./_"],e=>(0,a.default)({},...(0,r.default)(e[e.length-1].accounts).map(([e,{code:t,context:n}])=>({[e]:{address:e,binary:t,context:n}}))))}},next:{state:(0,a.default)({},...["depth","error","gas","memory","stack","storage"].map(e=>({[e]:(0,l.createLeaf)([c.default.next],t=>t[e])}))),step:m(c.default.next,"./state")},nextOfSameDepth:{state:(0,a.default)({},...["depth","error","gas","memory","stack","storage"].map(e=>({[e]:(0,l.createLeaf)([c.default.nextOfSameDepth],t=>t[e])})))}});t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(6)),a=f(n(11)),i=f(n(2)),o=f(n(0)),l=n(4),s=f(n(50)),c=f(n(28)),u=f(n(9)),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}const p=(0,o.default)("debugger:solidity:selectors");function y(e){return p("context: %O",e),void 0!==e.compiler&&c.default.satisfies(e.compiler.version,">=0.5.1",{includePrerelease:!0})&&!e.isConstructor}function m(e){return{instruction:(0,l.createLeaf)(["/current/instructionAtProgramCounter",e.programCounter],(e,t)=>e[t]||{}),modifierDepth:(0,l.createLeaf)(["./instruction"],e=>e.modifierDepth),source:(0,l.createLeaf)(["/current/sources","./instruction"],(e,{file:t})=>e&&e[t]||{}),findOverlappingRange:(0,l.createLeaf)(["./source","/views/findOverlappingRange"],({compilationId:e,id:t},n)=>(n[e]||{})[t]),sourceRange:(0,l.createLeaf)(["./instruction"],s.default.getSourceRange),pointerAndNode:(0,l.createLeaf)(["./findOverlappingRange","./sourceRange"],(e,t)=>e?s.default.findRange(e,t.start,t.length):null),pointer:(0,l.createLeaf)(["./pointerAndNode"],e=>e?e.pointer:null),node:(0,l.createLeaf)(["./source","./pointerAndNode"],({ast:e},t)=>t?t.node:e)}}let g=(0,l.createSelectorTree)({state:e=>e.solidity,info:{sources:(0,l.createLeaf)(["/state"],e=>e.info.sources.byCompilationId)},transaction:{bottomStackframeRequiresPhantomFrame:(0,l.createLeaf)([u.default.transaction.startingContext],y)},current:(0,i.default)({sources:(0,l.createLeaf)(["/info/sources",u.default.current.context],(e,t)=>t?void 0!==t.compilationId?(e[t.compilationId]||{byId:null}).byId:[]:null),sourceMap:(0,l.createLeaf)([u.default.current.context],e=>e?e.sourceMap:null),humanReadableSourceMap:(0,l.createLeaf)(["./sourceMap"],e=>e?s.default.getHumanReadableSourceMap(e):null),functionDepthStack:e=>e.solidity.proc.functionDepthStack,nextFrameIsPhantom:e=>e.solidity.proc.nextFrameIsPhantom,functionDepth:(0,l.createLeaf)(["./functionDepthStack"],e=>e[e.length-1]),callRequiresPhantomFrame:(0,l.createLeaf)([u.default.current.context],y),instructions:(0,l.createLeaf)(["./sources",u.default.current.context,"./humanReadableSourceMap"],(e,t,n)=>t?s.default.getProcessedInstructionsForBinary((e||[]).map(({source:e})=>e),t.binary,n):[]),instructionAtProgramCounter:(0,l.createLeaf)(["./instructions"],e=>(0,a.default)({},...e.map(e=>({[e.pc]:e}))))},m(u.default.current.step),{isSourceRangeFinal:(0,l.createLeaf)(["./instructionAtProgramCounter",u.default.current.step.programCounter,u.default.next.step.programCounter],(e,t,n)=>!e[n]||(t=e[t],n=e[n],t.start!=n.start||t.length!=n.length||t.file!=n.file)),functionsByProgramCounter:(0,l.createLeaf)(["./instructions","./sources","/views/findOverlappingRange",u.default.current.context],(e,t,n,{compilationId:r})=>s.default.getFunctionsByProgramCounter(e,t.map(({ast:e})=>e),n[r],r)),isMultiline:(0,l.createLeaf)(["./sourceRange"],({lines:e})=>e.start.line!=e.end.line),willJump:(0,l.createLeaf)([u.default.current.step.isJump],e=>e),jumpDirection:(0,l.createLeaf)(["./instruction"],(e={})=>e.jump||"-"),willCall:(0,l.createLeaf)([u.default.current.step.isCall,u.default.current.step.isCreate,u.default.current.step.isInstantCallOrCreate],(e,t,n)=>(e||t)&&!n),willReturn:(0,l.createLeaf)([u.default.current.step.isHalting],e=>e),nextMapped:(0,l.createLeaf)(["./instructionAtProgramCounter",d.default.steps,d.default.index],(e,t,n)=>t.slice(n+1).find(({pc:t})=>e[t]&&-1!==e[t].file))}),next:m(u.default.next.step),views:{findOverlappingRange:(0,l.createLeaf)(["/info/sources"],e=>(0,a.default)({},...(0,r.default)(e).map(([e,{byId:t}])=>({[e]:t.map(({ast:e})=>s.default.makeOverlapFunction(e))}))))}});t.default=g},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveSteps=function(e){return{type:r,steps:e}},t.next=function(){return{type:a}},t.tick=function(){return{type:i}},t.tock=function(){return{type:o}},t.endTrace=function(){return{type:l}},t.reset=function(){return{type:s}},t.unloadTransaction=function(){return{type:c}},t.backtick=function(){return{type:u}},t.setSubmoduleCount=function(e){return{type:d,count:e}};const r=t.SAVE_STEPS="TRACE_SAVE_STEPS";const a=t.NEXT="TRACE_NEXT";const i=t.TICK="TRACE_TICK";const o=t.TOCK="TRACE_TOCK";const l=t.END_OF_TRACE="TRACE_EOT";const s=t.RESET="TRACE_RESET";const c=t.UNLOAD_TRANSACTION="TRACE_UNLOAD_TRANSACTION";const u=t.BACKTICK="TRACE_BACKTICK";const d=t.SET_SUBMODULE_COUNT="TRACE_SET_SUBMODULE_COUNT"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(30));t.setSubmoduleCount=function*(e){yield(0,i.put)(s.setSubmoduleCount(e))},t.addSubmoduleToCount=function*(){let e=yield(0,i.select)(c.default.application.submoduleCount);yield(0,i.put)(s.setSubmoduleCount(e+1))},t.advance=function*(){yield(0,i.put)(s.next()),f("TOCK to take"),yield(0,i.take)([s.TOCK,s.END_OF_TRACE]),f("TOCK taken")},t.signalTickSagaCompletion=function*(){yield(0,i.put)(s.backtick())},t.processTrace=function*(e){return yield(0,i.put)(s.saveSteps(e)),[...new r.default(e.map(({op:e,stack:t})=>(0,o.isCallMnemonic)(e)?l.Evm.Utils.toAddress(t[t.length-2]):void 0).filter(e=>void 0!==e&&e!==l.Evm.Utils.ZERO_ADDRESS))]},t.reset=function*(){yield(0,i.put)(s.reset())},t.unload=function*(){yield(0,i.put)(s.unloadTransaction())},t.saga=y;var a=d(n(0)),i=n(5),o=n(1),l=u(n(3)),s=u(n(12)),c=d(n(8));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}const f=(0,a.default)("debugger:trace:sagas");function*p(){let e=yield(0,i.select)(c.default.stepsRemaining);f("remaining: %o",e);let t=yield(0,i.select)(c.default.steps);f("total steps: %o",t.length);let n=0;if(e>0){for(f("putting TICK"),n=yield(0,i.select)(c.default.application.submoduleCount),yield(0,i.put)(s.tick()),f("put TICK");n>0;)yield(0,i.take)(s.BACKTICK),f("got BACKTICK"),n--;e--}e?(f("putting TOCK"),yield(0,i.put)(s.tock()),f("put TOCK")):(f("putting END_OF_TRACE"),yield(0,i.put)(s.endTrace()),f("put END_OF_TRACE"))}function*y(){yield(0,i.takeEvery)(s.NEXT,p)}t.default=(0,o.prefixName)("trace",y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(e,t){return{type:r,provider:e,txHash:t}},t.loadTransaction=function(e){return{type:a,txHash:e}},t.interrupt=function(){return{type:i}},t.unloadTransaction=function(){return{type:o}},t.ready=function(){return{type:l}},t.wait=function(){return{type:s}},t.error=function(e){return{type:c,error:e}},t.recordContracts=function(e,t){return{type:u,contexts:e,sources:t}},t.saveTransaction=function(e){return{type:d,transaction:e}},t.saveReceipt=function(e){return{type:f,receipt:e}},t.saveBlock=function(e){return{type:p,block:e}},t.setLightMode=function(){return{type:y}},t.setFullMode=function(){return{type:m}},t.startFullMode=function(){return{type:g}},t.addCompilations=function(e,t){return{type:b,sources:e,contexts:t}};const r=t.START="SESSION_START";const a=t.LOAD_TRANSACTION="SESSION_LOAD_TRANSACTION";const i=t.INTERRUPT="SESSION_INTERRUPT";const o=t.UNLOAD_TRANSACTION="SESSION_UNLOAD_TRANSACTION";const l=t.READY="SESSION_READY";const s=t.WAIT="SESSION_WAIT";const c=t.ERROR="SESSION_ERROR";const u=t.RECORD_CONTRACTS="SESSION_RECORD_CONTRACTS";const d=t.SAVE_TRANSACTION="SESSION_SAVE_TRANSACTION";const f=t.SAVE_RECEIPT="SESSION_SAVE_RECEIPT";const p=t.SAVE_BLOCK="SESSION_SAVE_BLOCK";const y=t.SET_LIGHT_MODE="SESSION_SET_LIGHT_MODE";const m=t.SET_FULL_MODE="SESSION_SET_FULL_MODE";const g=t.START_FULL_MODE="SESSION_START_FULL_MODE";const b=t.ADD_COMPILATIONS="SESSION_ADD_COMPILATIONS"},function(e,t){e.exports=require("babel-runtime/core-js/object/values")},function(e,t){e.exports=require("json-pointer")},function(e,t){e.exports=require("bn.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=A(n(2));t.scope=function*(e,t,n,r,a){yield(0,i.put)(s.scope(e,t,n,r,a))},t.declare=function*(e,t){yield(0,i.put)(s.declare(e.name,e.id,e.scope,t))},t.yulScope=function*(e,t,n,r){yield(0,i.put)(s.scope(void 0,e,r,t,n))},t.yulDeclare=function*(e,t,n,r,a){yield(0,i.put)(s.declare(e.name,(0,o.makePath)(r,t),(0,o.makePath)(r,n),a))},t.defineType=function*(e,t){yield(0,i.put)(s.defineType(e,t))},t.decode=_,t.decodeReturnValue=function*(){const e=yield(0,i.select)(f.default.views.userDefinedTypes),t=yield(0,i.select)(f.default.next.state),n=yield(0,i.select)(f.default.info.allocations),r=yield(0,i.select)(f.default.views.contexts),a=yield(0,i.select)(f.default.current.returnStatus),o=yield(0,i.select)(f.default.current.returnAllocation),l=m.decodeReturndata({userDefinedTypes:e,state:t,allocations:n,contexts:r},o,a);T("beginning decoding");let s=l.next();for(;!s.done;){T("request received");let e,t=s.value;switch(t.type){case"code":e=yield*v(t.address);break;default:T("unrecognized request type!")}T("sending response"),s=l.next(e)}return T("done decoding"),s.value},t.reset=function*(){yield(0,i.put)(s.reset())},t.recordAllocations=function*(){const e=yield(0,i.select)(f.default.views.contractAllocationInfo);T("contracts %O",e);const t=yield(0,i.select)(f.default.views.referenceDeclarations),n=yield(0,i.select)(f.default.views.userDefinedTypes);T("referenceDeclarations %O",t);const r=m.Storage.Allocate.getStorageAllocations(n);T("storageAllocations %O",r);const a=m.Memory.Allocate.getMemoryAllocations(n),o=m.AbiData.Allocate.getAbiAllocations(n),l=m.AbiData.Allocate.getCalldataAllocations(e,t,n,o),c=m.Storage.Allocate.getStateAllocations(e,t,n,r);yield(0,i.put)(s.allocate(r,a,o,l,c))},t.saga=I;var a=A(n(0)),i=n(5),o=n(1),l=n(12),s=b(n(29)),c=b(n(13)),u=b(n(24)),d=b(n(32)),f=A(n(21)),p=A(n(55)),y=A(n(16)),m=b(n(3)),g=A(n(17));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}const T=(0,a.default)("debugger:data:sagas");function*E(){yield*function*(){if(!(yield(0,i.select)(f.default.views.atLastInstructionForSourceRange)))return;let e,t=yield(0,i.select)(f.default.current.node);if(!t)return;switch(t.nodeType){case"IndexAccess":case"MemberAccess":e=yield(0,i.select)(f.default.nextMapped.state.stack);break;case"YulFunctionCall":e=yield(0,i.select)(f.default.nextOfSameDepth.state.stack);break;default:e=yield(0,i.select)(f.default.next.state.stack)}if(!e)return;let n,a,l,c,u,d,b,A=e.length-1,E=yield(0,i.select)(f.default.current.pointer),v=yield(0,i.select)(f.default.next.pointer),I=yield(0,i.select)(f.default.current.scopes.inlined),O=yield(0,i.select)(f.default.current.allocations.state),L=yield(0,i.select)(f.default.info.allocations.storage),h=yield(0,i.select)(f.default.views.userDefinedTypes),N=yield(0,i.select)(f.default.proc.assignments),D=yield(0,i.select)(f.default.proc.mappedPaths),x=yield(0,i.select)(f.default.current.functionDepth),k=yield(0,i.select)(f.default.current.modifierDepth),M=yield(0,i.select)(f.default.current.inModifier),P=yield(0,i.select)(f.default.current.inFunctionOrModifier),w=yield(0,i.select)(f.default.current.address),U=yield(0,i.select)(f.default.current.compilationId),B=yield(0,i.select)(f.default.current.sourceId),j=yield(0,i.select)(f.default.current.compiler);if(yield(0,i.select)(f.default.current.aboutToModify)){let e=yield(0,i.select)(f.default.current.modifierBeingInvoked),t=yield(0,i.select)(f.default.current.modifierArgumentIndex);T("currentIndex %d",t);let n=e.parameters.parameters,r=n.slice(t+1),a=(0,p.default)(r.map(m.Ast.Utils.stackSize));T("adjustment %d",a),l=S(U,n,A+a,x,k,"ModifierDefinition"===e.nodeType)}else l={};switch(t.nodeType){case"FunctionDefinition":case"ModifierDefinition":let p=yield(0,i.select)(f.default.next.modifierBeingInvoked);if(p&&p.id===t.id)break;let V=t.parameters.parameters;a=S(U,V,A,x,k,M),T("Function definition case"),T("assignments %O",a),yield(0,i.put)(s.assign(a));break;case"YulFunctionDefinition":if(null===v||!v.startsWith(E+"/body/"))break;const F=(t.returnVariables||[]).map((e,t,n)=>"/returnVariables/"+(n.length-1-t)),K=(t.parameters||[]).map((e,t)=>"/parameters/"+t);let H=[];if(!(yield(0,i.select)(f.default.current.bareLetsInYulAreHit))){let e=0;for(const n of t.body.statements){if("YulVariableDeclaration"!==n.nodeType||null!=n.value)break;for(let t=0;t<n.variables.length;t++)H.unshift(`/body/statements/${e}/variables/${t}`);e++}}const Y=H.concat(F,K);T("suffixes: %O",Y),a={},b=A;for(const e of Y){const t=(0,o.makePath)(B,E+e);n=(0,o.makeAssignment)(M?{compilationId:U,astRef:t,stackframe:x,modifierDepth:k}:{compilationId:U,astRef:t,stackframe:x},{location:"stack",from:b,to:b}),a[n.id]=n,b--}yield(0,i.put)(s.assign(a));break;case"ContractDefinition":let q=O[t.id];T("Contract definition case"),T("allocations %O",O),T("allocation %O",q),a={};for(let e in q.members){e=Number(e);let t={compilationId:U,astRef:e,address:w},i=(0,o.stableKeccak256)(t);n=(0,r.default)({},t,{id:i,ref:(0,r.default)({},(N.byId[i]||{}).ref||{},q.members[e].pointer)}),a[i]=n}T("assignments %O",a),yield(0,i.put)(s.assign(a));break;case"FunctionTypeName":if(t=I[I[t.id].parentId].definition,"VariableDeclaration"!==t.nodeType)break;case"VariableDeclaration":let X=t.id;if(T("Variable declaration case"),T("currentDepth %d varId %d",x,X),!P){T("already a contract variable!");break}n=(0,o.makeAssignment)(M?{compilationId:U,astRef:X,stackframe:x,modifierDepth:k}:{compilationId:U,astRef:X,stackframe:x},{location:"stack",from:A-m.Ast.Utils.stackSize(t)+1,to:A}),a={[n.id]:n},T("assignments: %O",a),yield(0,i.put)(s.assign(a));break;case"YulFunctionCall":if(null!==v&&v.startsWith(E))break;case"YulLiteral":case"YulIdentifier":let G=E.replace(/\/[^/]*$/,""),W=yield(0,i.select)(f.default.current.root),$=y.default.get(W,G);if(E!==G+"/value"||"YulVariableDeclaration"!==$.nodeType)break;t=$,E=G;case"YulVariableDeclaration":const J=(0,o.makePath)(B,E);T("sourceAndPointer: %s",J),a={},b=A;for(let e=t.variables.length-1;e>=0;e--){const t=`${J}/variables/${e}`;n=(0,o.makeAssignment)(M?{compilationId:U,astRef:t,stackframe:x,modifierDepth:k}:{compilationId:U,astRef:t,stackframe:x},{location:"stack",from:b,to:b}),a[n.id]=n,b--}yield(0,i.put)(s.assign(a));break;case"IndexAccess":if(T("Index access case"),a=(0,r.default)({},l,R(U,t,e,x,k,M)),c=t.baseExpression,"bytes"===m.Ast.Utils.typeClass(c)||"array"===m.Ast.Utils.typeClass(c)&&(m.Ast.Utils.isReference(t)?"storage"!==m.Ast.Utils.referenceType(c):!m.Ast.Utils.isMapping(t))){T("Index case bailed out early"),T("typeClass %s",m.Ast.Utils.typeClass(c)),T("referenceType %s",m.Ast.Utils.referenceType(c)),T("isReference(node) %o",m.Ast.Utils.isReference(t)),yield(0,i.put)(s.assign(a));break}let Z=m.Ast.Utils.keyDefinition(c,I),z=yield*function*(e,t){let n=yield*function*(e,t){let n=yield(0,i.select)(f.default.current.scopes.inlined),r=yield(0,i.select)(f.default.current.compilationId),a=yield(0,i.select)(f.default.proc.assignments),l=yield(0,i.select)(f.default.current.functionDepth),s=yield(0,i.select)(f.default.current.modifierDepth),c=yield(0,i.select)(f.default.current.inModifier);for(;;){let i=e.id,u=c?{compilationId:r,astRef:i,stackframe:l,modifierDepth:s}:{compilationId:r,astRef:i,stackframe:l},d=(0,o.stableKeccak256)(u);const f=(a.byId[d]||{}).ref;if(m.Ast.Utils.isSimpleConstant(e))return T("about to decode simple literal"),yield*_(t,{location:"definition",definition:e},r);if(f){let n;return n=m.Ast.Utils.isReference(e)?m.Ast.Utils.spliceLocation(t,m.Ast.Utils.referenceType(e)):t,T("about to decode"),yield*_(n,f,r)}if(e.referencedDeclaration&&n[e.referencedDeclaration]){T("referencedDeclaration %d",e.referencedDeclaration);let a=n[e.referencedDeclaration].definition;if(T("indexConstantDeclaration %O",a),a.constant){let e=a.value;return m.Ast.Utils.isSimpleConstant(e)?(T("about to decode simple constant"),yield*_(t,{location:"definition",definition:a.value},r)):null}return null}if("typeConversion"===e.kind)e=e.arguments[0];else{if("UnaryOperation"!==e.nodeType||"+"!==e.operator)return null;e=e.subExpression}}}(e,t);return n?m.Conversion.cleanBool(n):n}(t.indexExpression,Z);if(T("index value %O",z),T("keyDefinition %o",Z),null!=z&&z.value){d=C(U,c,D,N,x,k,M);let e={path:d};switch(m.Ast.Utils.typeClass(c)){case"array":e.hashPath=m.Ast.Utils.isDynamicArray(c),e.offset=z.value.asBN.muln(m.Storage.Allocate.storageSize(m.Ast.Import.definitionToType(t,U,j),h,L).words);break;case"mapping":e.key=z,e.offset=new g.default(0);break;default:T("unrecognized index access!")}T("slot %O",e),yield(0,i.put)(s.mapPathAndAssign(w,e,a,m.Ast.Utils.typeIdentifier(t),m.Ast.Utils.typeIdentifier(c)))}else T("failed to decode, just assigning"),yield(0,i.put)(s.assign(a));break;case"MemberAccess":if(a=(0,r.default)({},l,R(U,t,e,x,k,M)),T("Member access case"),c=t.expression,"struct"!==m.Ast.Utils.typeClass(c)||(m.Ast.Utils.isReference(t)?"storage"!==m.Ast.Utils.referenceType(c):!m.Ast.Utils.isMapping(t))){T("Member case bailed out early"),yield(0,i.put)(s.assign(a));break}d=C(U,c,D,N,x,k,M),u={path:d};let Q=m.Ast.Import.definitionToType(c,U,j),ee=L[Q.id].members,te=I[t.referencedDeclaration].definition.name,ne=ee.find(e=>e.name===te);u.offset=ne.pointer.range.from.slot.offset.clone(),T("slot %o",u),yield(0,i.put)(s.mapPathAndAssign(w,u,a,m.Ast.Utils.typeIdentifier(t),m.Ast.Utils.typeIdentifier(c)));break;default:if(void 0===t.id||null==t.typeDescriptions)break;T("decoding expression value %O",t.typeDescriptions),T("default case"),T("currentDepth %d node.id %d",x,t.id),a=(0,r.default)({},l,R(U,t,e,x,k,M)),yield(0,i.put)(s.assign(a))}}(),yield*c.signalTickSagaCompletion()}function*_(e,t,n){const r=yield(0,i.select)(f.default.views.userDefinedTypes),a=yield(0,i.select)(f.default.current.state),o=yield(0,i.select)(f.default.views.mappingKeys),l=yield(0,i.select)(f.default.info.allocations),s=yield(0,i.select)(f.default.views.contexts),c=yield(0,i.select)(f.default.current.context),u=yield(0,i.select)(f.default.current.functionsByProgramCounter),d=new Uint8Array(m.Evm.Utils.WORD_SIZE),p=m.decodeVariable(e,t,{userDefinedTypes:r,state:a,mappingKeys:o,allocations:l,contexts:s,currentContext:c,internalFunctionsTable:u},n);T("beginning decoding");let y=p.next();for(;!y.done;){T("request received");let e,t=y.value;switch(t.type){case"storage":e=d;break;case"code":e=yield*v(t.address);break;default:T("unrecognized request type!")}T("sending response"),y=p.next(e)}return T("done decoding"),T("decoded value: %O",y.value),y.value}function*v(e){const t=new Uint8Array,n=yield(0,i.select)(f.default.views.blockNumber),r=yield(0,i.select)(f.default.views.instances);if(e in r)return r[e];if(e===m.Evm.Utils.ZERO_ADDRESS)return t;{T("fetching binary");let t=(yield*d.obtainBinaries([e],n))[0];return T("adding instance"),yield*u.addInstance(e,t),m.Conversion.toBytes(t)}}function R(e,t,n,r,a,i){let l,s=n.length-1;try{l=m.Stack.Read.readStack({location:"stack",from:s-m.Ast.Utils.stackSize(t)+1,to:s},{stack:n,storage:{}})}catch(e){l=void 0}let c=(0,o.makeAssignment)(i?{compilationId:e,astRef:t.id,stackframe:r,modifierDepth:a}:{compilationId:e,astRef:t.id,stackframe:r},{location:"stackliteral",literal:l});return{[c.id]:c}}function S(e,t,n,r,a=0,i=!1){let l=t.slice().reverse();T("reverseParameters %o",t);let s=n,c={};for(let t of l){let n=m.Ast.Utils.stackSize(t),l={location:"stack",from:s-n+1,to:s},u=(0,o.makeAssignment)(i?{compilationId:e,astRef:t.id,stackframe:r,modifierDepth:a}:{compilationId:e,astRef:t.id,stackframe:r},l);c[u.id]=u,s-=n}return c}function C(e,t,n,r,a,i,l){let s=(0,o.stableKeccak256)(l?{compilationId:e,astRef:t.id,stackframe:a,modifierDepth:i}:{compilationId:e,astRef:t.id,stackframe:a});return T("astId: %d",t.id),T("stackframe: %d",a),T("fullId: %s",s),T("currentAssignments: %O",r),{offset:m.Conversion.toBN(r.byId[s].ref.literal)}}function*I(){yield(0,i.takeEvery)(l.TICK,E)}t.default=(0,o.prefixName)("data",I)},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.advance=function(e){return{type:r,count:e}},t.stepNext=function(){return{type:a}},t.stepOver=function(){return{type:i}},t.stepInto=function(){return{type:o}},t.stepOut=function(){return{type:l}},t.reset=function(){return{type:s}},t.interrupt=function(){return{type:c}},t.continueUntilBreakpoint=function(e){return{type:u,breakpoints:e}},t.addBreakpoint=function(e){return{type:d,breakpoint:e}},t.removeBreakpoint=function(e){return{type:f,breakpoint:e}},t.removeAllBreakpoints=function(){return{type:p}},t.startStepping=function(){return{type:y}},t.doneStepping=function(){return{type:m}};const r=t.ADVANCE="CONTROLLER_ADVANCE";const a=t.STEP_NEXT="CONTROLLER_STEP_NEXT";const i=t.STEP_OVER="CONTROLLER_STEP_OVER";const o=t.STEP_INTO="CONTROLLER_STEP_INTO";const l=t.STEP_OUT="CONTROLLER_STEP_OUT";const s=t.RESET="CONTROLLER_RESET";const c=t.INTERRUPT="CONTROLLER_INTERRUPT";const u=t.CONTINUE="CONTROLLER_CONTINUE";const d=t.ADD_BREAKPOINT="CONTROLLER_ADD_BREAKPOINT";const f=t.REMOVE_BREAKPOINT="CONTROLLER_REMOVE_BREAKPOINT";const p=t.REMOVE_ALL_BREAKPOINTS="CONTROLLER_REMOVE_ALL_BREAKPOINTS";const y=t.START_STEPPING="CONTROLLER_START_STEPPING";const m=t.DONE_STEPPING="CONTROLLER_DONE_STEPPING"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_DEFINITION=t.TX_DEFINITION=t.MSG_DEFINITION=t.NOW_DEFINITION=void 0;var r=b(n(15)),a=b(n(2)),i=b(n(6)),o=b(n(11)),l=b(n(0)),s=n(4),c=b(n(16)),u=b(n(27)),d=b(n(28)),f=n(1),p=b(n(8)),y=b(n(9)),m=b(n(10)),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3));function b(e){return e&&e.__esModule?e:{default:e}}const A=(0,l.default)("debugger:data:selectors"),T=e=>e;function E(e,t,n,r=null,a=null){for(;e&&!t.includes(e.nodeType);)if(void 0!==e.id)e=n[n[e.id].parentId].definition;else{if(null===r||null===a)return null;r=r.replace(/\/[^/]*$/,""),e=c.default.get(a,r)}return e}function _(e,t){let n;switch(e.nodeType){case"ModifierInvocation":n=e.modifierName.referencedDeclaration;break;case"InheritanceSpecifier":n=e.baseName.referencedDeclaration;break;default:A("bad invocation node")}let r=t[n].definition;switch(r.nodeType){case"ModifierDefinition":return r;case"ContractDefinition":return r.nodes.find(e=>"FunctionDefinition"===e.nodeType&&"constructor"===g.Ast.Utils.functionKind(e));default:return}}function v(e){let{context:t,contractName:n,binary:r,contractId:a,contractKind:i,isConstructor:o,abi:l,payable:s,compiler:c,compilationId:u}=e;return{context:t,contractName:n,binary:r,contractId:a,contractKind:i,isConstructor:o,abi:g.AbiData.Utils.computeSelectors(l),payable:s,compiler:c,compilationId:u}}const R=t.NOW_DEFINITION={id:-1,src:"0:0:-1",name:"now",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},S=t.MSG_DEFINITION={id:-1,src:"0:0:-1",name:"msg",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},C=t.TX_DEFINITION={id:-1,src:"0:0:-1",name:"tx",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_transaction",typeString:"tx"}},I=t.BLOCK_DEFINITION={id:-1,src:"0:0:-1",name:"block",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_block",typeString:"block"}};const O=(0,s.createSelectorTree)({state:e=>e.data,views:{atLastInstructionForSourceRange:(0,s.createLeaf)([m.default.current.isSourceRangeFinal],e=>e),scopes:{_:(0,s.createLeaf)(["./raw","./inlined/raw"],(e,t)=>(0,o.default)({},...(0,i.default)(e).map(([n,r])=>({[n]:(0,o.default)({},...(0,i.default)(r).map(([r,i])=>{let o=t[n][r].definition;if("ContractDefinition"!==o.nodeType)return{[r]:i};A("contract id %d",r);let l=(0,a.default)({},i),s=o.linearizedBaseContracts.slice().reverse();return s.pop(),l.variables=[].concat(...s.map(t=>e[n][t].variables||[])).filter(e=>"private"!==t[n][e.astRef].definition.visibility).concat(e[n][r].variables||[]).filter(e=>{A("variable %O",e);let r=t[n][e.astRef].definition;return!r.constant||g.Ast.Utils.isSimpleConstant(r.value)}),{[r]:l}}))})))),raw:(0,s.createLeaf)(["/info/scopes"],e=>(0,o.default)({},...(0,i.default)(e.byCompilationId).map(([e,{byAstRef:t}])=>({[e]:(0,a.default)({},t)})))),inlined:{_:(0,s.createLeaf)(["../_","./raw"],(e,t)=>(0,o.default)({},...(0,i.default)(t).map(([t,n])=>({[t]:(0,o.default)({},...(0,i.default)(n).map(([n,r])=>({[n]:(0,a.default)({},r,{variables:e[t][n].variables})})))})))),raw:(0,s.createLeaf)(["../raw",m.default.info.sources],(e,t)=>(0,o.default)({},...(0,i.default)(e).map(([e,n])=>({[e]:(0,o.default)({},...(0,i.default)(n).map(([n,r])=>({[n]:(0,a.default)({},r,{definition:c.default.get(t[e].byId[r.sourceId].ast,r.pointer)})})))}))))}},userDefinedTypes:(0,s.createLeaf)(["./referenceDeclarations","./scopes",m.default.info.sources],(e,t,n)=>(0,o.default)({},...(0,u.default)((0,i.default)(e).map(([a,i])=>(0,r.default)(i).map(r=>g.Ast.Import.definitionToStoredType(r,a,n[a].byId[t[a][r.id].sourceId].compiler,e[a])).map(e=>({[e.id]:e})))))),contractAllocationInfo:(0,s.createLeaf)(["/info/userDefinedTypes","/views/scopes/inlined",m.default.info.sources,y.default.info.contexts],(e,t,n,a)=>(0,r.default)(e).filter(({compilationId:e,id:n})=>"ContractDefinition"===t[e][n].definition.nodeType).map(({compilationId:e,id:i})=>{A("id: %O",i),A("compilationId: %O",e);let o=(0,r.default)(a).find(t=>!t.isConstructor&&t.compilationId===e&&t.contractId===i),l=(0,r.default)(a).find(t=>t.isConstructor&&t.compilationId===e&&t.contractId===i),s=o?o.immutableReferences:void 0;return{contractNode:t[e][i].definition,compilationId:e,immutableReferences:s,compiler:n[e].byId[t[e][i].sourceId].compiler,abi:(o||{}).abi,deployedContext:o,constructorContext:l}})),referenceDeclarations:(0,s.createLeaf)(["./scopes/inlined","/info/userDefinedTypes"],(e,t)=>(0,o.default)({},...(0,i.default)(e).map(([e,n])=>({[e]:(0,o.default)({},...t.map(({compilationId:t,id:r})=>t===e?{[r]:n[r].definition}:{}))})))),mappingKeys:(0,s.createLeaf)(["/proc/mappedPaths","/current/address"],(e,t)=>[].concat(...(0,r.default)((e.byAddress[t]||{byType:{}}).byType).map(({bySlotAddress:e})=>(0,r.default)(e))).filter(e=>void 0!==e.key)),blockNumber:(0,s.createLeaf)([y.default.transaction.globals.block],e=>e.number.toString()),instances:(0,s.createLeaf)([y.default.current.codex.instances],e=>(0,o.default)({},...(0,i.default)(e).map(([e,{binary:t}])=>({[e]:g.Conversion.toBytes(t)})))),contexts:(0,s.createLeaf)([y.default.info.contexts],e=>(0,o.default)({},...(0,r.default)(e).filter(e=>!e.isConstructor).map(e=>({[e.contractId]:v(e)}))))},info:{scopes:(0,s.createLeaf)(["/state"],e=>e.info.scopes),allocations:{storage:(0,s.createLeaf)(["/state"],e=>e.info.allocations.storage),state:(0,s.createLeaf)(["/state"],e=>e.info.allocations.state),memory:(0,s.createLeaf)(["/state"],e=>e.info.allocations.memory),abi:(0,s.createLeaf)(["/state"],e=>e.info.allocations.abi),calldata:(0,s.createLeaf)(["/state"],e=>e.info.allocations.calldata)},userDefinedTypes:(0,s.createLeaf)(["/state"],e=>e.info.userDefinedTypes)},proc:{assignments:(0,s.createLeaf)(["/state"],e=>e.proc.assignments),mappedPaths:(0,s.createLeaf)(["/state"],e=>e.proc.mappedPaths),decodingKeys:(0,s.createLeaf)(["./mappedPaths"],e=>e.decodingStarted)},current:{state:{stack:(0,s.createLeaf)([y.default.current.state.stack],e=>(e||[]).map(e=>g.Conversion.toBytes(e))),memory:(0,s.createLeaf)([y.default.current.state.memory],e=>g.Conversion.toBytes(e.join(""))),code:(0,s.createLeaf)([y.default.current.context],({binary:e})=>g.Conversion.toBytes(e)),calldata:(0,s.createLeaf)([y.default.current.call],({data:e})=>g.Conversion.toBytes(e)),storage:(0,s.createLeaf)([y.default.current.codex.storage],e=>(0,o.default)({},...(0,i.default)(e).map(([e,t])=>({["0x"+e]:g.Conversion.toBytes(t)})))),specials:(0,s.createLeaf)(["/current/address",y.default.current.call,y.default.transaction.globals],(e,{sender:t,value:n},{tx:r,block:l})=>(0,a.default)({this:g.Conversion.toBytes(e),sender:g.Conversion.toBytes(t),value:g.Conversion.toBytes(n)},(0,o.default)({},...(0,i.default)(r).map(([e,t])=>({[e]:g.Conversion.toBytes(t)}))),(0,o.default)({},...(0,i.default)(l).map(([e,t])=>({[e]:g.Conversion.toBytes(t)})))))},compilationId:(0,s.createLeaf)([y.default.current.context],({compilationId:e})=>e),sourceId:(0,s.createLeaf)([m.default.current.source],({id:e})=>e),root:(0,s.createLeaf)([m.default.current.source],({ast:e})=>e),scopes:{_:(0,s.createLeaf)(["/views/scopes","../compilationId"],(e,t)=>e[t]),inlined:(0,s.createLeaf)(["/views/scopes/inlined","../compilationId"],(e,t)=>e[t])},referenceDeclarations:(0,s.createLeaf)(["/views/referenceDeclarations","./compilationId"],(e,t)=>e[t]),allocations:{state:(0,s.createLeaf)(["/info/allocations/state","/views/userDefinedTypes","../compilationId",y.default.current.context],(e,t,n,{isConstructor:r})=>{const l=n?e[n]:{};let s=(0,o.default)({},...(0,i.default)(l).map(([e,t])=>({[e]:{members:t.members.map(e=>(0,a.default)({},e))}})));if(r)for(const e in s){const t=s[e];let n=4*g.Evm.Utils.WORD_SIZE;for(const e of t.members)"code"!==e.pointer.location&&"nowhere"!==e.pointer.location||(e.pointer={location:"memory",start:n,length:g.Evm.Utils.WORD_SIZE},n+=g.Evm.Utils.WORD_SIZE)}return(0,o.default)({},...(0,i.default)(s).map(([e,t])=>({[e]:{members:(0,o.default)({},...t.members.map(e=>({[e.definition.id]:e})))}})))})},compiler:(0,s.createLeaf)([y.default.current.context],({compiler:e})=>e),bareLetsInYulAreHit:(0,s.createLeaf)(["./compiler"],e=>void 0!==e&&d.default.satisfies(e.version,">=0.6.8",{includePrerelease:!0})),node:(0,s.createLeaf)([m.default.current.node],T),pointer:(0,s.createLeaf)([m.default.current.pointer],T),scope:(0,s.createLeaf)(["./node"],T),contract:(0,s.createLeaf)(["./node","./scopes/inlined","./pointer","./root"],(e,t,n,r)=>E(e,["ContractDefinition","SourceUnit"],t,n,r)),function:(0,s.createLeaf)(["./node","./scopes/inlined","./pointer","./root"],(e,t,n,r)=>E(e,["FunctionDefinition","ModifierDefinition","ContractDefinition","SourceUnit"],t,n,r)),inModifier:(0,s.createLeaf)(["./function"],e=>e&&"ModifierDefinition"===e.nodeType),inFunctionOrModifier:(0,s.createLeaf)(["./function"],e=>e&&("FunctionDefinition"===e.nodeType||"ModifierDefinition"===e.nodeType)),functionDepth:(0,s.createLeaf)([m.default.current.functionDepth],T),modifierDepth:(0,s.createLeaf)([m.default.current.modifierDepth],T),address:(0,s.createLeaf)([y.default.current.call],e=>e.storageAddress),functionsByProgramCounter:(0,s.createLeaf)([m.default.current.functionsByProgramCounter],e=>e),context:(0,s.createLeaf)([y.default.current.context],v),aboutToModify:(0,s.createLeaf)(["./node","./modifierInvocation","./modifierArgumentIndex","/next/node","/next/modifierInvocation",y.default.current.step.isContextChange],(e,t,n,r,a,i)=>{if(i||!e||void 0===e.id||!r||void 0===r.id||!t||void 0===t.id||!a||void 0===a.id)return!1;if("SourceUnit"===t.nodeType)return!1;if("FunctionDefinition"===r.nodeType||"ModifierDefinition"===r.nodeType)return!1;if("SourceUnit"!==a.nodeType&&a.id===t.id)return!1;if(void 0===n)return!1;let o=t.arguments[n];for(;"typeConversion"===o.kind;){if(e.id===o.id)return!0;o=o.arguments[0]}return e.id===o.id}),modifierInvocation:(0,s.createLeaf)(["./node","./scopes/inlined"],(e,t)=>E(e,["ModifierInvocation","InheritanceSpecifier","SourceUnit"],t)),modifierArgumentIndex:(0,s.createLeaf)(["./scopes","./node","./modifierInvocation"],(e,t,n)=>{if(!n||"SourceUnit"===n.nodeType)return;let r=e[t.id].pointer,a=e[n.id].pointer,i=r.slice(a.length);A("difference %s",i);let o=i.match(/^\/arguments\/(\d+)/);return A("rawIndex %o",o),null!==o?parseInt(o[1]):void 0}),modifierBeingInvoked:(0,s.createLeaf)(["./modifierInvocation","./scopes/inlined"],(e,t)=>{if(e&&"SourceUnit"!==e.nodeType)return _(e,t)}),identifiers:{_:(0,s.createLeaf)(["/current/scopes/inlined","/current/node","/current/pointer","/current/sourceId"],(e,t,n,r)=>{let i={};if(void 0!==t){let a=void 0!==t.id?t.id:(0,f.makePath)(r,n);for(;null!==a&&e[a]&&(i=(0,o.default)(i,...(e[a].variables||[]).filter(e=>""!==e.name).filter(e=>null==i[e.name]).map(e=>({[e.name]:{astRef:e.astRef}}))),"YulFunctionDefinition"!==e[a].definition.nodeType);)a=void 0!==e[a].parentId?e[a].parentId:a.replace(/\/[^/]*(\/\d+)?$/,"")}return t&&(t.nodeType.startsWith("Yul")||"InlineAssembly"===t.nodeType)?i:(0,a.default)({},i,{msg:{builtin:"msg"},tx:{builtin:"tx"},block:{builtin:"block"},this:{builtin:"this"},now:{builtin:"now"}})}),definitions:{_:(0,s.createLeaf)(["/current/scopes/inlined","../_","./this"],(e,t,n)=>{let r=(0,o.default)({},...(0,i.default)(t).map(([t,n])=>{if(void 0!==n.astRef){let{definition:r}=e[n.astRef];return{[t]:r}}return{}})),l={msg:S,tx:C,block:I,now:R};return n&&(l.this=n),(0,a.default)({},r,l)}),this:(0,s.createLeaf)(["/current/contract"],e=>{return e&&"ContractDefinition"===e.nodeType?(t=e.name,n=e.id,r=e.contractKind,{id:-1,src:"0:0:-1",name:"this",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_contract$_"+t.replace(/\$/g,"$$".repeat(3))+"_$"+n,typeString:r+" "+t}}):null;var t,n,r})},refs:(0,s.createLeaf)(["/proc/assignments","./_","/current/compilationId","/current/functionDepth","/current/modifierDepth","/current/inModifier","/current/address"],(e,t,n,r,a,l,s)=>(0,o.default)({},...(0,i.default)(t).map(([t,{astRef:i,builtin:o}])=>{let c;if(A("astRef: %o",i),A("builtin: %s",o),void 0!==i){c=(((e.byCompilationId[n]||{}).byAstRef||{})[i]||[]).find(t=>e.byId[t].address===s),A("id after global: %s",c),void 0===c&&(c=l?(0,f.stableKeccak256)({astRef:i,compilationId:n,stackframe:r,modifierDepth:a}):(0,f.stableKeccak256)({astRef:i,compilationId:n,stackframe:r})),A("id after local: %s",c)}else A("builtin: %s",o),c=e.byBuiltin[o][0];A("id: %s",c);let{ref:u}=e.byId[c]||{};if(u)return{[t]:u}})))},returnStatus:(0,s.createLeaf)([y.default.current.step.returnStatus],e=>null===e?void 0:e),returnAllocation:(0,s.createLeaf)([y.default.current.call,"/current/context","/info/allocations/calldata"],({data:e},{context:t,isConstructor:n},{constructorAllocations:r,functionAllocations:a})=>{if(n){let e=r[t];return e?e.output:null}{let n=e.slice(0,10);A("selector: %s",n),A("bySelector: %o",a[t]);let r=(a[t]||{})[n];return r?r.output:null}})},next:{state:{stack:(0,s.createLeaf)([y.default.next.state.stack],e=>(e||[]).map(e=>g.Conversion.toBytes(e))),returndata:(0,s.createLeaf)([y.default.current.step.returnValue],e=>g.Conversion.toBytes(e))},node:(0,s.createLeaf)([m.default.next.node],T),pointer:(0,s.createLeaf)([m.default.next.pointer],T),modifierInvocation:(0,s.createLeaf)(["./node","/current/scopes/inlined",y.default.current.step.isContextChange],(e,t,n)=>{if(n)return;return E(e,["ModifierInvocation","InheritanceSpecifier","SourceUnit"],t)}),modifierBeingInvoked:(0,s.createLeaf)(["./modifierInvocation","/current/scopes/inlined",y.default.current.step.isContextChange],(e,t,n)=>{if(!n&&e&&"SourceUnit"!==e.nodeType)return _(e,t)})},nextMapped:{state:{stack:(0,s.createLeaf)([m.default.current.nextMapped],e=>((e||{}).stack||[]).map(e=>g.Conversion.toBytes(e)))}},nextOfSameDepth:{state:{stack:(0,s.createLeaf)([p.default.nextOfSameDepth],e=>e?(e.stack||[]).map(e=>g.Conversion.toBytes(e)):null)}}});t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(2)),a=f(n(0)),i=n(4),o=f(n(9)),l=f(n(10)),s=f(n(16)),c=f(n(51)),u=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3));function f(e){return e&&e.__esModule?e:{default:e}}const p=(0,a.default)("debugger:stacktrace:selectors"),y=e=>e;function m(e,t,n,a){let i=e.map(e=>e.calledFromLocation);i.shift(),i.push(t),p("locations: %O",i);const o=e.map(({functionName:e,contractName:t,address:n})=>({functionName:e,contractName:t,address:n}));p("names: %O",o);let l=(0,c.default)(i,o,(e,t)=>(0,r.default)({},t,{location:e}));return null!==n&&(l[l.length-1].status=n),void 0!==a&&(l[0].message=a),l}function g(e){return{location:{source:(0,i.createLeaf)([e.source],y),sourceRange:(0,i.createLeaf)([e.sourceRange],y),node:(0,i.createLeaf)([e.node],y),pointer:(0,i.createLeaf)([e.pointer],y)},strippedLocation:(0,i.createLeaf)(["./location/source","./location/sourceRange"],({id:e,compilationId:t,sourcePath:n},r)=>({source:{id:e,compilationId:t,sourcePath:n},sourceRange:r})),contractNode:(0,i.createLeaf)(["./location/source","./location/pointer"],({ast:e},t)=>t?s.default.get(e,t.replace(/\/nodes\/\d+$/,"")):e)}}let b=(0,i.createSelectorTree)({state:e=>e.stacktrace,current:(0,r.default)({callstack:(0,i.createLeaf)(["/state"],e=>e.proc.callstack),returnCounter:(0,i.createLeaf)(["/state"],e=>e.proc.returnCounter),lastPosition:(0,i.createLeaf)(["/state"],e=>e.proc.lastPosition),innerReturnPosition:(0,i.createLeaf)(["/state"],e=>e.proc.innerReturnPosition),innerReturnStatus:(0,i.createLeaf)(["/state"],e=>e.proc.innerReturnStatus)},g(l.default.current),{willJumpIn:(0,i.createLeaf)([l.default.current.willJump,l.default.current.jumpDirection],(e,t)=>e&&"i"===t),willJumpOut:(0,i.createLeaf)([l.default.current.willJump,l.default.current.jumpDirection],(e,t)=>e&&"o"===t),willCall:(0,i.createLeaf)([l.default.current.willCall],y),context:(0,i.createLeaf)([o.default.current.context],y),callContext:(0,i.createLeaf)([o.default.current.step.callContext],y),willReturn:(0,i.createLeaf)([l.default.current.willReturn],y),returnStatus:(0,i.createLeaf)([o.default.current.step.returnStatus],y),address:(0,i.createLeaf)([o.default.current.call],e=>e.storageAddress),callAddress:(0,i.createLeaf)([o.default.current.step.isCall,o.default.current.step.isCreate,o.default.current.step.callAddress,o.default.current.step.createdAddress],(e,t,n,r)=>e?n:t?r!==d.Evm.Utils.ZERO_ADDRESS?r:void 0:null),revertString:(0,i.createLeaf)([o.default.current.step.returnValue],e=>{let t=d.decodeRevert(d.Conversion.toBytes(e));if(1===t.length&&"revert"===t[0].kind){let e=t[0].arguments[0].value.value;switch(e.kind){case"valid":return e.asString;case"malformed":return Buffer.from(e.asHex.slice(2),"hex").toString()}}}),positionWillChange:(0,i.createLeaf)(["/next/location","/current/location","./lastPosition"],(e,t,n)=>{let r=void 0!==t.source.id?t:n;return Boolean(r)&&Boolean(e.source)&&void 0!==e.source.id&&(e.source.compilationId!==r.source.compilationId||e.source.id!==r.source.id||e.sourceRange.start!==r.sourceRange.start||e.sourceRange.length!==r.sourceRange.length)}),finalReport:(0,i.createLeaf)(["./callstack","./innerReturnPosition","./innerReturnStatus","./revertString"],m),report:(0,i.createLeaf)(["./callstack","./returnCounter","./lastPosition","/current/strippedLocation"],(e,t,n,r)=>m((0,u.popNWhere)(e,t,e=>"external"===e.type),r||n,null,void 0))}),next:(0,r.default)({},g(l.default.next))});t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(6)),a=u(n(11)),i=u(n(0)),o=n(4),l=u(n(9)),s=u(n(8)),c=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}const d=(0,i.default)("debugger:session:selectors"),f=(0,o.createSelectorTree)({state:e=>e.session,info:{affectedInstances:(0,o.createLeaf)([l.default.current.codex.instances,l.default.info.contexts,c.default.info.sources],(e,t,n)=>(0,a.default)({},...(0,r.default)(e).map(([r,{context:a,binary:i}])=>{d("instances %O",e),d("contexts %O",t);let o=t[a];if(!o)return{[r]:{binary:i}};let{contractName:l,compilationId:s,primarySource:c}=o;return d("primarySource: %o",c),d("compilationId: %s",s),d("sources: %o",n),{[r]:{contractName:l,source:void 0!==c?n[s].byId[c]:void 0,binary:i}}})))},transaction:{_:(0,o.createLeaf)(["/state"],e=>e.transaction),receipt:(0,o.createLeaf)(["/state"],e=>e.receipt),block:(0,o.createLeaf)(["/state"],e=>e.block)},status:{readyOrError:(0,o.createLeaf)(["/state"],e=>e.ready),ready:(0,o.createLeaf)(["./readyOrError","./isError"],(e,t)=>e&&!t),waiting:(0,o.createLeaf)(["/state"],e=>!e.ready),error:(0,o.createLeaf)(["/state"],e=>e.lastLoadingError),isError:(0,o.createLeaf)(["./error"],e=>null!==e),success:(0,o.createLeaf)(["./error"],e=>null===e),errored:(0,o.createLeaf)(["./readyOrError","./isError"],(e,t)=>e&&t),loaded:(0,o.createLeaf)([s.default.loaded],e=>e),lightMode:(0,o.createLeaf)(["/state"],e=>e.lightMode)}});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(6)),a=p(n(2));t.addContext=function*(e){const t=e.context||(0,l.keccak256)({type:"string",value:e.binary});return y("context %O",e),yield(0,o.put)(c.addContext((0,a.default)({},e,{context:t}))),t},t.addInstance=function*(e,t){const n=(yield(0,o.select)(u.default.info.binaries.search))(t);return yield(0,o.put)(c.addInstance(e,n,t)),n},t.refreshInstances=function*(){const e=yield(0,o.select)(u.default.current.codex.instances);for(let[t,{binary:n}]of(0,r.default)(e)){const e=(yield(0,o.select)(u.default.info.binaries.search))(n);yield(0,o.put)(c.addInstance(t,e,n))}},t.begin=function*({address:e,binary:t,data:n,storageAddress:r,status:a,sender:i,value:l,gasprice:s,block:d}){yield(0,o.put)(c.saveGlobals(i,s,d)),yield(0,o.put)(c.saveStatus(a)),y("codex: %O",yield(0,o.select)(u.default.current.codex)),e?yield(0,o.put)(c.call(e,n,r,i,l)):yield(0,o.put)(c.create(t,r,i,l))},t.callstackAndCodexSaga=g,t.reset=function*(){let e=yield(0,o.select)(u.default.transaction.initialCall);yield(0,o.put)(c.reset()),yield(0,o.put)(e)},t.unload=function*(){yield(0,o.put)(c.unloadTransaction())},t.saga=b;var i=p(n(0)),o=n(5),l=n(1),s=n(12),c=f(n(31)),u=p(n(9)),d=f(n(13));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}const y=(0,i.default)("debugger:evm:sagas");function*m(){y("got TICK"),yield*g(),yield*d.signalTickSagaCompletion()}function*g(){if(yield(0,o.select)(u.default.current.step.isExceptionalHalting))y("exceptional halt!"),yield(0,o.put)(c.fail());else if(yield(0,o.select)(u.default.current.step.isInstantCallOrCreate));else if(yield(0,o.select)(u.default.current.step.isCall)){y("got call");let e=yield(0,o.select)(u.default.current.step.callAddress),t=yield(0,o.select)(u.default.current.step.callData);if(y("calling address %s",e),yield(0,o.select)(u.default.current.step.isDelegateCallStrict)){let{storageAddress:n,sender:r,value:a}=yield(0,o.select)(u.default.current.call);yield(0,o.put)(c.call(e,t,n,r,a))}else{let n=yield(0,o.select)(u.default.current.call),r=(yield(0,o.select)(u.default.current.step.isDelegateCallBroad))?n.storageAddress:e,a=n.storageAddress,i=yield(0,o.select)(u.default.current.step.callValue);yield(0,o.put)(c.call(e,t,r,a,i))}}else if(yield(0,o.select)(u.default.current.step.isCreate)){y("got create");let e=yield(0,o.select)(u.default.current.step.createBinary),t=yield(0,o.select)(u.default.current.step.createdAddress),n=yield(0,o.select)(u.default.current.step.createValue),r=(yield(0,o.select)(u.default.current.call)).storageAddress;yield(0,o.put)(c.create(e,t,r,n))}else if(yield(0,o.select)(u.default.current.step.isNormalHalting)){y("got return");let{binary:e,storageAddress:t}=yield(0,o.select)(u.default.current.call);if(e){let e=yield(0,o.select)(u.default.current.step.returnValue),n=(yield(0,o.select)(u.default.info.binaries.search))(e);yield(0,o.put)(c.returnCreate(t,e,n))}else yield(0,o.put)(c.returnCall())}else if(yield(0,o.select)(u.default.current.step.isStore)){let e=(yield(0,o.select)(u.default.current.call)).storageAddress,t=yield(0,o.select)(u.default.current.step.storageAffected),n=yield(0,o.select)(u.default.current.step.valueStored);yield(0,o.put)(c.store(e,t,n))}else if(yield(0,o.select)(u.default.current.step.isLoad)){let e=(yield(0,o.select)(u.default.current.call)).storageAddress,t=yield(0,o.select)(u.default.current.step.storageAffected),n=yield(0,o.select)(u.default.current.step.valueLoaded);yield(0,o.put)(c.load(e,t,n))}}function*b(){yield(0,o.takeEvery)(s.TICK,m)}t.default=(0,l.prefixName)("evm",b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(2)),a=u(n(0)),i=n(4),o=n(1),l=u(n(9)),s=u(n(10)),c=u(n(8));function u(e){return e&&e.__esModule?e:{default:e}}const d=(0,a.default)("debugger:controller:selectors"),f=e=>e;function p(e,t,n,r){let a=n+r;return e(n,r).some(({range:e,node:t})=>function(e){return"InlineAssembly"===e.nodeType&&!e.AST}(t)||n<=e[0]&&e[0]<a&&!(0,o.isSkippedNodeType)(t))}const y=(0,i.createSelectorTree)({state:e=>e.controller,current:{functionDepth:(0,i.createLeaf)([s.default.current.functionDepth],f),executionContext:(0,i.createLeaf)([l.default.current.call],f),willJump:(0,i.createLeaf)([l.default.current.step.isJump],f),location:{sourceRange:(0,i.createLeaf)([s.default.current.sourceRange,"/current/trace/loaded"],(e,t)=>t?e:null),source:(0,i.createLeaf)([s.default.current.source,"/current/trace/loaded"],(e,t)=>t?e:null),node:(0,i.createLeaf)([s.default.current.node,"/current/trace/loaded"],(e,t)=>t?e:null),isMultiline:(0,i.createLeaf)([s.default.current.isMultiline,"/current/trace/loaded"],(e,t)=>!!t&&e)},trace:{finished:(0,i.createLeaf)([c.default.finished],f),loaded:(0,i.createLeaf)([c.default.loaded],f)}},breakpoints:{_:(0,i.createLeaf)(["/state"],e=>e.breakpoints),resolver:(0,i.createLeaf)([s.default.info.sources,s.default.views.findOverlappingRange],(e,t)=>n=>{let a;if(void 0===n.node){let i=n.line;d("breakpoint: %O",n),d("sources: %o",e);let{source:o,ast:l}=e[n.compilationId].byId[n.sourceId],s=t[n.compilationId][n.sourceId],c=o.split("\n").map(e=>e.length),u=[0];for(let e of c)u.push(u[u.length-1]+e+1);for(d("line: %s",o.slice(u[i],u[i]+c[i]));i<c.length&&!p(s,0,u[i],c[i]);)d("incrementing"),i++;a=i>=c.length?null:(0,r.default)({},n,{line:i})}else d("node-based breakpoint"),a=n;return a})},finished:(0,i.createLeaf)(["/current/trace/finished"],e=>e),isStepping:(0,i.createLeaf)(["./state"],e=>e.isStepping)});t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=n(4),i=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("debugger:ast:selectors");const l=(0,a.createSelectorTree)({views:{sources:(0,a.createLeaf)([i.default.info.sources],e=>e)}});t.default=l},function(e,t){e.exports=require("lodash.flatten")},function(e,t){e.exports=require("semver")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scope=function(e,t,n,a,i){return{type:r,id:e,pointer:t,parentId:n,sourceId:a,compilationId:i}},t.declare=function(e,t,n,r){return{type:a,name:e,astRef:t,scopeAstRef:n,compilationId:r}},t.assign=function(e){return{type:i,assignments:e}},t.mapPathAndAssign=function(e,t,n,r,a){return{type:o,address:e,slot:t,assignments:n,typeIdentifier:r,parentType:a}},t.reset=function(){return{type:l}},t.defineType=function(e,t){return{type:s,node:e,compilationId:t}},t.allocate=function(e,t,n,r,a){return{type:c,storage:e,memory:t,abi:n,calldata:r,state:a}};const r=t.SCOPE="DATA_SCOPE";const a=t.DECLARE="DATA_DECLARE_VARIABLE";const i=t.ASSIGN="DATA_ASSIGN";const o=t.MAP_PATH_AND_ASSIGN="DATA_MAP_PATH_AND_ASSIGN";const l=t.RESET="DATA_RESET";const s=t.DEFINE_TYPE="DATA_DEFINE_TYPE";const c=t.ALLOCATE="DATA_ALLOCATE"},function(e,t){e.exports=require("babel-runtime/core-js/set")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addContext=function({context:e,contractName:t,binary:n,sourceMap:a,primarySource:i,immutableReferences:o,compiler:l,compilationId:s,abi:c,contractId:u,contractKind:d,isConstructor:f,externalSolidity:p}){return{type:r,context:e,contractName:t,binary:n,sourceMap:a,primarySource:i,immutableReferences:o,compiler:l,compilationId:s,abi:c,contractId:u,contractKind:d,isConstructor:f,externalSolidity:p}},t.addInstance=function(e,t,n){return{type:a,address:e,context:t,binary:n}},t.refreshInstances=function(e,t){return{type:i,address:e,context:t}},t.saveGlobals=function(e,t,n){return{type:o,origin:e,gasprice:t,block:n}},t.saveStatus=function(e){return{type:l,status:e}},t.call=function(e,t,n,r,a){return{type:s,address:e,data:t,storageAddress:n,sender:r,value:a}},t.create=function(e,t,n,r){return{type:c,binary:e,storageAddress:t,sender:n,value:r}},t.returnCall=function(){return{type:u}},t.returnCreate=function(e,t,n){return{type:d,address:e,code:t,context:n}},t.fail=function(){return{type:f}},t.store=function(e,t,n){return{type:p,address:e,slot:t,value:n}},t.load=function(e,t,n){return{type:y,address:e,slot:t,value:n}},t.reset=function(e){return{type:m,storageAddress:e}},t.unloadTransaction=function(){return{type:g}};const r=t.ADD_CONTEXT="EVM_ADD_CONTEXT";const a=t.ADD_INSTANCE="EVM_ADD_INSTANCE";const i=t.REFRESH_INSTANCE="EVM_REFRESH_INSTANCE";const o=t.SAVE_GLOBALS="EVM_SAVE_GLOBALS";const l=t.SAVE_STATUS="EVM_SAVE_STATUS";const s=t.CALL="EVM_CALL";const c=t.CREATE="EVM_CREATE";const u=t.RETURN_CALL="EVM_RETURN_CALL";const d=t.RETURN_CREATE="EVM_RETURN_CREATE";const f=t.FAIL="EVM_FAIL";const p=t.STORE="EVM_STORE";const y=t.LOAD="EVM_LOAD";const m=t.RESET="EVM_RESET";const g=t.UNLOAD_TRANSACTION="EVM_UNLOAD_TRANSACTION"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(2));t.inspectTransaction=function*(e){yield(0,i.put)(l.inspect(e));let t=yield(0,i.take)([l.RECEIVE_TRACE,l.ERROR_WEB3]);var n;if(m("action %o",t),t.type!=l.RECEIVE_TRACE)return{error:t.error};n=t.trace,m("received trace");let{address:r,binary:a,data:o,storageAddress:s,status:c,sender:u,value:d,gasprice:f,block:p}=yield(0,i.take)(l.RECEIVE_CALL);return m("received call"),{trace:n,address:r,binary:a,data:o,storageAddress:s,status:c,sender:u,value:d,gasprice:f,block:p}},t.obtainBinaries=function*(e,t){let n=yield(0,i.all)(e.map(e=>(0,i.fork)(T,e)));m("requesting binaries"),yield(0,i.all)(e.map(e=>(0,i.put)(l.fetchBinary(e,t))));let r=[];return r=yield(0,i.join)(n),m("binaries %o",r),r},t.init=function*(e){yield(0,i.put)(l.init(e))},t.saga=E;var a=y(n(0)),i=n(5),o=n(1),l=p(n(52)),s=p(n(14)),c=y(n(17)),u=y(n(33)),d=p(n(3)),f=y(n(53));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}const m=(0,a.default)("debugger:web3:sagas");function g(e){return e.startsWith("0x")?e.slice(2).padStart(2*d.Evm.Utils.WORD_SIZE,"0"):e}function*b(e,{txHash:t}){var n;m("inspecting transaction");try{n=yield(0,i.apply)(e,e.getTrace,[t])}catch(e){return m("putting error"),void(yield(0,i.put)(l.error(e)))}m("got trace"),n=n.map(e=>(0,r.default)({},e,{stack:e.stack.map(g),memory:e.memory.map(g)})),yield(0,i.put)(l.receiveTrace(n));let a=yield(0,i.apply)(e,e.getTransaction,[t]);m("tx %O",a);let o=yield(0,i.apply)(e,e.getReceipt,[t]);m("receipt %O",o);let f=yield(0,i.apply)(e,e.getBlock,[a.blockNumber]);m("block %O",f),yield(0,i.put)(s.saveTransaction(a)),yield(0,i.put)(s.saveReceipt(o)),yield(0,i.put)(s.saveBlock(f));let p={coinbase:f.miner,difficulty:new c.default(f.difficulty),gaslimit:new c.default(f.gasLimit),number:new c.default(f.number),timestamp:new c.default(f.timestamp)};if(null!=a.to)yield(0,i.put)(l.receiveCall({address:a.to,data:a.input,storageAddress:a.to,status:o.status,sender:a.from,value:new c.default(a.value),gasprice:new c.default(a.gasPrice),block:p}));else{let e=u.default.utils.isAddress(o.contractAddress)?o.contractAddress:d.Evm.Utils.ZERO_ADDRESS;yield(0,i.put)(l.receiveCall({binary:a.input,storageAddress:e,status:o.status,sender:a.from,value:new c.default(a.value),gasprice:new c.default(a.gasPrice),block:p}))}}function*A(e,{address:t,block:n}){m("fetching binary for %s",t);let r=yield(0,i.apply)(e,e.getDeployedCode,[t,n]);m("received binary for %s",t),yield(0,i.put)(l.receiveBinary(t,r))}function*T(e){let{binary:t}=yield(0,i.take)(t=>t.type==l.RECEIVE_BINARY&&t.address==e);return m("got binary for %s",e),t}function*E(){let{provider:e}=yield(0,i.take)(l.INIT_WEB3),t=new f.default(e);yield(0,i.takeEvery)(l.INSPECT,b,t),yield(0,i.takeEvery)(l.FETCH_BINARY,A,t)}t.default=(0,o.prefixName)("web3",E)},function(e,t){e.exports=require("web3")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(35));t.saga=A,t.reset=function*(){yield*s.reset(),yield*c.reset(),yield*u.reset(),yield*l.reset(),yield*d.reset()};var a=m(n(0)),i=n(5),o=n(1),l=y(n(13)),s=y(n(18)),c=y(n(24)),u=y(n(36)),d=y(n(38)),f=y(n(20)),p=m(n(25));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}const g=(0,a.default)("debugger:controller:sagas"),b={[f.ADVANCE]:T,[f.STEP_NEXT]:E,[f.STEP_OVER]:_,[f.STEP_INTO]:function*(){const e=yield(0,i.select)(p.default.current.functionDepth),t=yield(0,i.select)(p.default.current.location);let n,r,a;g("startingDepth: %d",e),g("starting source range: %O",(t||{}).sourceRange);do{yield*E(),n=yield(0,i.select)(p.default.current.functionDepth),r=yield(0,i.select)(p.default.current.location),a=yield(0,i.select)(p.default.current.trace.finished),g("currentDepth: %d",n),g("current source range: %O",(r||{}).sourceRange),g("finished: %o",a)}while(!a&&n<=e&&r.source.compilationId===t.source.compilationId&&r.source.id===t.source.id&&r.sourceRange.lines.start.line===t.sourceRange.lines.start.line)},[f.STEP_OUT]:function*(){if(yield(0,i.select)(p.default.current.location.isMultiline))return void(yield*_());const e=yield(0,i.select)(p.default.current.functionDepth);var t,n;do{yield*E(),t=yield(0,i.select)(p.default.current.functionDepth),n=yield(0,i.select)(p.default.current.trace.finished)}while(!n&&t>=e)},[f.CONTINUE]:function*(e){let t=void 0!==e&&void 0!==e.breakpoints?e.breakpoints:yield(0,i.select)(p.default.breakpoints),n=!1,r=yield(0,i.select)(p.default.current.location),a=r.sourceRange.lines.start.line,o=r.source.id,l=r.source.compilationId;do{yield*E();let e=a,s=o;if(r=yield(0,i.select)(p.default.current.location),g("currentLocation: %O",r),yield(0,i.select)(p.default.current.trace.finished))break;if(o=r.source.id,void 0===o)continue;l=r.source.compilationId;let c=r.node.id;a=r.sourceRange.lines.start.line,n=t.filter(({sourceId:t,compilationId:n,line:r,node:i})=>void 0!==i?n===l&&t===o&&i===c:n===l&&t===o&&r===a&&(o!==s||a!==e)).length>0}while(!n)}};function*A(){for(;;){g("waiting for control action");let e=yield(0,i.take)((0,r.default)(b));if(!(yield(0,i.select)(p.default.current.trace.loaded)))continue;g("got control action");let t=b[e.type];yield(0,i.put)(f.startStepping()),yield(0,i.race)({exec:(0,i.call)(t,e),interrupt:(0,i.take)(f.INTERRUPT)}),yield(0,i.put)(f.doneStepping())}}function*T(e){let t=void 0!==e&&void 0!==e.count?e.count:1;for(let e=0;e<t&&!(yield(0,i.select)(p.default.current.trace.finished));e++)yield*l.advance()}function*E(){const e=yield(0,i.select)(p.default.current.location);var t,n;do{yield*T(),t=yield(0,i.select)(p.default.current.location),n=yield(0,i.select)(p.default.current.trace.finished)}while(!n&&(!t||!t.node||(0,o.isDeliberatelySkippedNodeType)(t.node)||t.sourceRange.start===e.sourceRange.start&&t.sourceRange.length===e.sourceRange.length&&t.source.id===e.source.id&&t.source.compilationId===e.source.compilationId))}function*_(){const e=yield(0,i.select)(p.default.current.functionDepth),t=yield(0,i.select)(p.default.current.location);var n,r,a;do{yield*E(),n=yield(0,i.select)(p.default.current.functionDepth),r=yield(0,i.select)(p.default.current.location),a=yield(0,i.select)(p.default.current.trace.finished)}while(!a&&n>=e&&(n>e||r.source.id===t.source.id&&r.source.compilationId===t.source.compilationId&&r.sourceRange.lines.start.line===t.sourceRange.lines.start.line))}t.default=(0,o.prefixName)("controller",A)},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSources=function*(e){yield(0,a.put)(o.addSources(e))},t.reset=function*(){let e=yield(0,a.select)(c.default.transaction.bottomStackframeRequiresPhantomFrame);yield(0,a.put)(o.reset(e))},t.unload=function*(){yield(0,a.put)(o.unloadTransaction())},t.begin=function*(){let e=yield(0,a.select)(c.default.transaction.bottomStackframeRequiresPhantomFrame);yield(0,a.put)(o.externalCall(e))},t.saga=y;var r=d(n(0)),a=n(5),i=n(1),o=u(n(37)),l=n(12),s=u(n(13)),c=d(n(10));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}const f=(0,r.default)("debugger:solidity:sagas");function*p(){f("got TICK"),yield*function*(){if(yield(0,a.select)(c.default.current.willReturn))yield(0,a.put)(o.externalReturn());else if(yield(0,a.select)(c.default.current.willJump)){let e=yield(0,a.select)(c.default.current.jumpDirection);f("checking guard");let t=yield(0,a.select)(c.default.current.nextFrameIsPhantom),n=yield(0,a.select)(c.default.next.source);"i"===e&&t&&void 0!==n.id?yield(0,a.put)(o.clearPhantomGuard()):yield(0,a.put)(o.jump(e))}else if(yield(0,a.select)(c.default.current.willCall)){f("checking if guard needed");let e=yield(0,a.select)(c.default.current.callRequiresPhantomFrame);yield(0,a.put)(o.externalCall(e))}}(),f("instruction: %O",yield(0,a.select)(c.default.current.instruction)),yield*s.signalTickSagaCompletion()}function*y(){yield(0,a.takeEvery)(l.TICK,p)}t.default=(0,i.prefixName)("solidity",y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSources=function(e){return{type:r,compilations:e}},t.jump=function(e){return{type:a,jumpDirection:e}},t.externalCall=function(e){return{type:i,guard:e}},t.externalReturn=function(){return{type:o}},t.clearPhantomGuard=function(){return{type:l}},t.reset=function(e){return{type:s,guard:e}},t.unloadTransaction=function(){return{type:c}};const r=t.ADD_SOURCES="SOLIDITY_ADD_SOURCES";const a=t.JUMP="SOLIDITY_JUMP";const i=t.EXTERNAL_CALL="SOLIDITY_EXTERNAL_CALL";const o=t.EXTERNAL_RETURN="SOLIDITY_EXTERNAL_RETURN";const l=t.CLEAR_PHANTOM_GUARD="SOLIDITY_CLEAR_PHANTOM_GUARD";const s=t.RESET="SOLIDITY_RESET";const c=t.UNLOAD_TRANSACTION="SOLIDITY_UNLOAD_TRANSACTION"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function*(){yield(0,a.put)(o.reset())},t.unload=function*(){yield(0,a.put)(o.unloadTransaction())},t.begin=function*(){const e=yield(0,a.select)(c.default.current.context),t=yield(0,a.select)(c.default.current.address);yield(0,a.put)(o.externalCall(null,e,t))},t.saga=y;var r=d(n(0)),a=n(5),i=n(1),o=u(n(39)),l=n(12),s=u(n(13)),c=d(n(22));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}const f=(0,r.default)("debugger:stacktrace:sagas");function*p(){yield*function*(){const e=yield(0,a.select)(c.default.current.strippedLocation),t=yield(0,a.select)(c.default.current.lastPosition),n=yield(0,a.select)(c.default.current.returnCounter);let r=!1;if(yield(0,a.select)(c.default.current.willReturn)){const n=yield(0,a.select)(c.default.current.returnStatus);f("returning!"),yield(0,a.put)(o.externalReturn(t,n,e)),r=!0}else n>0&&(yield(0,a.select)(c.default.current.positionWillChange))&&(f("executing!"),f("location: %o",yield(0,a.select)(c.default.next.location)),f("marked: %o",t),yield(0,a.put)(o.executeReturn(n,e)),r=!0);if(yield(0,a.select)(c.default.current.willJumpIn)){const t=yield(0,a.select)(c.default.next.location),n=yield(0,a.select)(c.default.next.contractNode);yield(0,a.put)(o.jumpIn(e,t.node,n)),r=!0}else if(yield(0,a.select)(c.default.current.willJumpOut))yield(0,a.put)(o.jumpOut(e)),r=!0;else if(yield(0,a.select)(c.default.current.willCall)){const t=yield(0,a.select)(c.default.current.callContext),n=yield(0,a.select)(c.default.current.callAddress);yield(0,a.put)(o.externalCall(e,t,n)),r=!0}r||(yield(0,a.put)(o.updatePosition(e)))}(),yield*s.signalTickSagaCompletion()}function*y(){yield(0,a.takeEvery)(l.TICK,p)}t.default=(0,i.prefixName)("stacktrace",y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jumpIn=function(e,t,n){return{type:r,location:e,functionNode:t,contractNode:n}},t.jumpOut=function(e){return{type:a,location:e}},t.externalCall=function(e,t,n){return{type:i,location:e,context:t,address:n}},t.externalReturn=function(e,t,n){return{type:o,from:e,status:t,location:n}},t.executeReturn=function(e,t){return{type:l,counter:e,location:t}},t.updatePosition=function(e){return{type:s,location:e}},t.reset=function(){return{type:c}},t.unloadTransaction=function(){return{type:u}};const r=t.JUMP_IN="STACKTRACE_JUMP_IN";const a=t.JUMP_OUT="STACKTRACE_JUMP_OUT";const i=t.EXTERNAL_CALL="STACKTRACE_EXTERNAL_CALL";const o=t.EXTERNAL_RETURN="STACKTRACE_EXTERNAL_RETURN";const l=t.EXECUTE_RETURN="STACKTRACE_EXECUTE_RETURN";const s=t.UPDATE_POSITION="STACKTRACE_UPDATE_POSITION";const c=t.RESET="STACKTRACE_RESET";const u=t.UNLOAD_TRANSACTION="STACKTRACE_UNLOAD_TRANSACTION"},function(e,t,n){n(41);var r=n(42).default;e.exports=r},function(e,t){e.exports=require("source-map-support/register")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(19)),a=g(n(0)),i=g(n(43)),o=n(4),l=g(n(21)),s=g(n(26)),c=g(n(8)),u=g(n(9)),d=g(n(10)),f=g(n(23)),p=g(n(22)),y=g(n(25)),m=n(3);function g(e){return e&&e.__esModule?e:{default:e}}const b=(0,a.default)("debugger"),A={forTx:(E=(0,r.default)((function*(e,t={}){let{contracts:n,files:r,provider:a,compilations:o,lightMode:l}=t;o||(o=m.Compilations.Utils.shimArtifacts(n,r));let s=new i.default(o,a,{lightMode:l},e);try{yield s.ready(),b("session ready")}catch(e){b("error occurred, unloaded"),s.unload()}return s})),function(e){return E.apply(this,arguments)}),forProject:(T=(0,r.default)((function*(e={}){let{contracts:t,files:n,provider:r,compilations:a,lightMode:o}=e;a||(a=m.Compilations.Utils.shimArtifacts(t,n));let l=new i.default(a,r,{lightMode:o});return yield l.ready(),l})),function(){return T.apply(this,arguments)}),get selectors(){return(0,o.createNestedSelector)({ast:s.default,data:l.default,trace:c.default,evm:u.default,solidity:d.default,stacktrace:p.default,session:f.default,controller:y.default})}};var T,E;t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(6)),a=h(n(11)),i=h(n(2)),o=h(n(19)),l=h(n(44)),s=h(n(0)),c=L(n(3)),u=n(1),d=h(n(46)),f=L(n(20)),p=L(n(14)),y=h(n(21)),m=h(n(22)),g=h(n(23)),b=L(n(18)),A=L(n(34)),T=L(n(56)),E=h(n(25)),_=n(4),v=h(n(26)),R=h(n(8)),S=h(n(9)),C=h(n(10)),I=h(n(58)),O=n(65);function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}const N=(0,s.default)("debugger:session");class D{constructor(e,t,n,r){let{store:a,sagaMiddleware:i}=(0,d.default)(I.default,T.default,[n]);this._store=a,this._sagaMiddleware=i;let{contexts:o,sources:s}=D.normalize(e);this._store.dispatch(p.recordContracts(o,s)),this._ready=new l.default((e,t)=>{const n=this._store.subscribe(()=>{this.view(g.default.status.ready)?(N("ready!"),n(),e()):this.view(g.default.status.errored)&&(N("error!"),n(),t(this.view(g.default.status.error)))})}),this._store.dispatch(p.start(t,r))}ready(){var e=this;return(0,o.default)((function*(){yield e._ready}))()}readyAgainAfterLoading(e){var t=this;return(0,o.default)((function*(){return new l.default((function(n,r){let a=!1;N("reready listener set up");const i=t._store.subscribe((function(){N("reready?"),a?t.view(g.default.status.ready)?(N("reready!"),i(),n(!0)):t.view(g.default.status.errored)&&(i(),N("error!"),r(t.view(g.default.status.error))):t.view(g.default.status.waiting)&&(N("started waiting"),a=!0)}));t.dispatch(e)}))}))()}static normalize(e){let t=[],n={};for(let r of e){if(r.unreliableSourceOrder)throw new Error(`Error: Compilation ${r.id} has unreliable source order.`);let e=r.compiler;n[r.id]=[];for(let t in r.sources){let a=r.sources[t];a&&(n[r.id][t]=(0,i.default)({},a,{compiler:a.compiler||e,compilationId:r.id,id:t}))}for(let e of r.contracts){let n,{contractName:a,bytecode:i,sourceMap:o,deployedBytecode:l,deployedSourceMap:s,immutableReferences:u,abi:d,compiler:f,primarySourceId:p}=e;"object"==typeof i&&(i=(0,O.shimBytecode)(i)),"object"==typeof l&&(l=(0,O.shimBytecode)(l)),void 0!==p&&(n=r.sources.findIndex(e=>e&&e.id===p));let y=c.Compilations.Utils.getContractNode(e,r),m=y?y.id:void 0,g=y?y.contractKind:void 0;d=c.AbiData.Utils.schemaAbiToAbi(d),N("contractName %s",a),N("sourceMap %o",o),N("compiler %o",f),N("abi %O",d),i&&"0x"!=i&&t.push({contractName:a,binary:i,sourceMap:o,primarySource:n,abi:d,compiler:f,compilationId:r.id,contractId:m,contractKind:g,externalSolidity:r.externalSolidity,isConstructor:!0}),l&&"0x"!=l&&t.push({contractName:a,binary:l,sourceMap:s,primarySource:n,immutableReferences:u,abi:d,compiler:f,compilationId:r.id,contractId:m,contractKind:g,externalSolidity:r.externalSolidity,isConstructor:!1})}}return t=(0,a.default)({},...t.map(e=>{const t=(0,u.keccak256)({type:"string",value:e.binary});return{[t]:(0,i.default)({},e,{context:t})}})),t=c.Contexts.Utils.normalizeContexts(t),{contexts:t,sources:n}}get state(){return this._store.getState()}view(e){return e(this.state)}dispatch(e){var t=this;return(0,o.default)((function*(){return t._store.dispatch(e),!0}))()}_runSaga(e,...t){var n=this;return(0,o.default)((function*(){return yield n._sagaMiddleware.run(e,...t).toPromise()}))()}interrupt(){var e=this;return(0,o.default)((function*(){yield e.dispatch(p.interrupt()),yield e.dispatch(f.interrupt())}))()}doneStepping(e){var t=this;return(0,o.default)((function*(){return new l.default((function(n){let r=!1;const a=t._store.subscribe((function(){const e=t.view(E.default.isStepping);if(e&&!r)return r=!0,void N("heard step start");!e&&r&&(N("heard step stop"),a(),n(!0))}));t.dispatch(e)}))}))()}load(e){var t=this;return(0,o.default)((function*(){if(t.view(g.default.status.loaded))return!1;try{return yield t.readyAgainAfterLoading(p.loadTransaction(e))}catch(e){return t._runSaga(T.unload),e}}))()}unload(){var e=this;return(0,o.default)((function*(){return!!e.view(g.default.status.loaded)&&(N("unloading"),yield e._runSaga(T.unload),!0)}))()}advance(e){var t=this;return(0,o.default)((function*(){return yield t.doneStepping(f.advance(e))}))()}stepNext(){var e=this;return(0,o.default)((function*(){return yield e.doneStepping(f.stepNext())}))()}stepOver(){var e=this;return(0,o.default)((function*(){return yield e.doneStepping(f.stepOver())}))()}stepInto(){var e=this;return(0,o.default)((function*(){return yield e.doneStepping(f.stepInto())}))()}stepOut(){var e=this;return(0,o.default)((function*(){return yield e.doneStepping(f.stepOut())}))()}reset(){var e=this;return(0,o.default)((function*(){if(e.view(g.default.status.loaded))return yield e._runSaga(A.reset)}))()}continueUntilBreakpoint(e){var t=this;return(0,o.default)((function*(){return yield t.doneStepping(f.continueUntilBreakpoint(e))}))()}addBreakpoint(e){var t=this;return(0,o.default)((function*(){return yield t.dispatch(f.addBreakpoint(e))}))()}removeBreakpoint(e){var t=this;return(0,o.default)((function*(){return yield t.dispatch(f.removeBreakpoint(e))}))()}removeAllBreakpoints(){var e=this;return(0,o.default)((function*(){return yield e.dispatch(f.removeAllBreakpoints())}))()}decodeReady(){return(0,o.default)((function*(){return!0}))()}variable(e){var t=this;return(0,o.default)((function*(){const n=t.view(y.default.current.identifiers.definitions),r=t.view(y.default.current.identifiers.refs),a=t.view(y.default.current.compilationId);return yield t._runSaga(b.decode,n[e],r[e],a)}))()}variables(){var e=this;return(0,o.default)((function*(){if(!e.view(g.default.status.loaded))return{};let t=e.view(y.default.current.identifiers.definitions),n=e.view(y.default.current.identifiers.refs),a=e.view(y.default.current.compilationId),i={};for(let[o,l]of(0,r.default)(n))o in t&&(i[o]=yield e._runSaga(b.decode,t[o],l,a));return i}))()}returnValue(){var e=this;return(0,o.default)((function*(){return e.view(g.default.status.loaded)&&e.view(S.default.current.step.isHalting)?yield e._runSaga(b.decodeReturnValue):null}))()}callstack(){return this.view(g.default.status.loaded)?this.view(m.default.current.report):null}stacktrace(){return this.view(g.default.status.loaded)?this.view(m.default.current.finalReport):null}connect(){return this}addExternalCompilations(e){var t=this;return(0,o.default)((function*(){let{contexts:n,sources:r}=D.normalize(e);return yield t.dispatch(p.addCompilations(r,n))}))()}startFullMode(){var e=this;return(0,o.default)((function*(){return yield e.dispatch(p.startFullMode())}))()}get selectors(){return(0,_.createNestedSelector)({ast:v.default,data:y.default,trace:R.default,evm:S.default,solidity:C.default,stacktrace:m.default,session:g.default,controller:E.default})}}t.default=D},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("json-stable-stringify")},function(e,t,n){"use strict";e.exports=n(47)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(48),i=(r=a)&&r.__esModule?r:{default:r};t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){const l=(0,i.default)();o||(o=a.compose);let s=(0,a.createStore)(e,r,o((0,a.applyMiddleware)(l)));return l.run(t,...n),{store:s,sagaMiddleware:l}};var r=o(n(0)),a=n(7),i=o(n(49));function o(e){return e&&e.__esModule?e:{default:e}}(0,r.default)("debugger:store:common")},function(e,t){e.exports=require("redux-saga")},function(e,t){e.exports=require("@truffle/solidity-utils")},function(e,t){e.exports=require("lodash.zipwith")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){return{type:r,provider:e}},t.inspect=function(e){return{type:a,txHash:e}},t.fetchBinary=function(e,t){return{type:i,address:e,block:t}},t.receiveBinary=function(e,t){return{type:o,address:e,binary:t}},t.receiveTrace=function(e){return{type:l,trace:e}},t.receiveCall=function({address:e,binary:t,data:n,storageAddress:r,status:a,sender:i,value:o,gasprice:l,block:c}){return{type:s,address:e,binary:t,data:n,storageAddress:r,status:a,sender:i,value:o,gasprice:l,block:c}},t.error=function(e){return{type:c,error:e}};const r=t.INIT_WEB3="INIT_WEB3";const a=t.INSPECT="INSPECT_TRANSACTION";const i=t.FETCH_BINARY="FETCH_BINARY";const o=t.RECEIVE_BINARY="RECEIVE_BINARY";const l=t.RECEIVE_TRACE="RECEIVE_TRACE";const s=t.RECEIVE_CALL="RECEIVE_CALL";const c=t.ERROR_WEB3="ERROR_WEB3"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(19)),a=l(n(0)),i=l(n(33)),o=n(54);function l(e){return e&&e.__esModule?e:{default:e}}const s=(0,a.default)("debugger:web3:adapter");t.default=class{constructor(e){this.web3=new i.default(e)}getTrace(e){var t=this;return(0,r.default)((function*(){let n=yield(0,o.promisify)(t.web3.currentProvider.send)({jsonrpc:"2.0",method:"debug_traceTransaction",params:[e,{}],id:(new Date).getTime()});if(n.error)throw new Error(n.error.message);return n.result.structLogs}))()}getTransaction(e){var t=this;return(0,r.default)((function*(){return yield t.web3.eth.getTransaction(e)}))()}getReceipt(e){var t=this;return(0,r.default)((function*(){return yield t.web3.eth.getTransactionReceipt(e)}))()}getBlock(e){var t=this;return(0,r.default)((function*(){return yield t.web3.eth.getBlock(e)}))()}getDeployedCode(e,t){var n=this;return(0,r.default)((function*(){s("getting deployed code for %s",e);let r=yield n.web3.eth.getCode(e,t);return"0x0"===r?"0x":r}))()}}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("lodash.sum")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(n(15)),a=T(n(35));t.saga=R,t.processTransaction=S,t.unload=function*(){E("unloading"),yield*y.reset(),yield*u.unload(),yield*f.unload(),yield*p.unload(),yield*d.unload(),yield(0,o.put)(g.unloadTransaction())};var i=T(n(0)),o=n(5),l=n(1),s=A(n(57)),c=A(n(34)),u=A(n(36)),d=A(n(38)),f=A(n(24)),p=A(n(13)),y=A(n(18)),m=A(n(32)),g=A(n(14)),b=T(n(23));function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}const E=(0,i.default)("debugger:session:sagas"),_={[g.LOAD_TRANSACTION]:function*({txHash:e}){yield*S(e)},[g.ADD_COMPILATIONS]:function*({sources:e,contexts:t}){E("recording contract binaries"),yield*C(t),E("recording contract sources"),yield*I(e),E("refreshing instances"),yield*f.refreshInstances()},[g.START_FULL_MODE]:function*(){if(E("session: %O",b.default),!(yield(0,o.select)(b.default.status.lightMode)))return;E("turning on data listener"),yield(0,o.fork)(y.saga),E("visiting ASTs"),yield*s.visitAll(),E("saving allocation table"),yield*y.recordAllocations(),yield*p.addSubmoduleToCount(),yield(0,o.put)(g.setFullMode())}};function*v(){for(;;){let e=yield(0,o.take)((0,a.default)(_)),t=_[e.type];yield(0,o.put)(g.wait()),yield(0,o.race)({exec:(0,o.call)(t,e),interrupt:(0,o.take)(g.INTERRUPT)}),yield(0,o.put)(g.ready())}}function*R(e){E("starting listeners"),yield*function*(e){yield(0,o.fork)(v);let t=[f,u,d];e.lightMode||t.push(y);let n=[p,c,m];const r=t.length,a=t.concat(n);return yield*p.setSubmoduleCount(r),yield(0,o.all)(a.map(e=>(0,o.fork)(e.saga)))}(e),E("waiting for contract information");let{contexts:t,sources:n}=yield(0,o.take)(g.RECORD_CONTRACTS);E("recording contract binaries"),yield*C(t),E("recording contract sources"),yield*I(n),E("waiting for start");let{txHash:r,provider:a}=yield(0,o.take)(g.START);E("starting"),e.lightMode?(E("setting light mode"),yield(0,o.put)(g.setLightMode())):(E("visiting ASTs"),yield*s.visitAll(),E("saving allocation table"),yield*y.recordAllocations()),E("initializing adapter"),yield*m.init(a),void 0!==r&&(yield*S(r)),E("readying"),yield*function*(){yield(0,o.put)(g.ready())}()}function*S(e){E("fetching transaction info");let t=yield*function*(e){let t=yield*m.inspectTransaction(e);if(E("result %o",t),t.error)return t.error;E("processing trace for addresses");let n=yield*p.processTrace(t.trace);t.address&&!n.includes(t.address)&&n.push(t.address);t.binary&&t.status&&!n.includes(t.storageAddress)&&n.push(t.storageAddress);let r=t.block.number.toString();E("obtaining binaries");let a=yield*m.obtainBinaries(n,r);E("recording instances"),yield(0,o.all)(n.map((e,t)=>(0,o.call)(O,e,a[t]))),E("sending initial call"),yield*f.begin(t),yield*u.begin(),yield*d.begin()}(e);t&&(E("error %o",t),yield*function*(e){yield(0,o.put)(g.error(e))}(t))}function*C(e){for(let t of(0,r.default)(e))yield*f.addContext(t)}function*I(e){yield*u.addSources(e)}function*O(e,t){yield*f.addInstance(e,t)}t.default=(0,l.prefixName)("session",R)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(15)),a=d(n(6));t.visitAll=function*(){let e=yield(0,o.select)(s.default.views.sources),t=(0,c.default)((0,r.default)(e).map(({byId:e})=>e)).filter(e=>e);yield(0,o.all)(t.filter(({ast:e})=>e).map(({ast:e,id:t,compilationId:n})=>(0,o.call)(p,n,t,e))),f("done visiting")};var i=d(n(0)),o=n(5),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(18)),s=d(n(26)),c=d(n(27)),u=d(n(16));function d(e){return e&&e.__esModule?e:{default:e}}const f=(0,i.default)("debugger:ast:sagas");function*p(e,t,n,r="",i=null){if(f("walking %d %o %o",t,r,n),yield*function*(e,t,n,r,a){if(f("entering %d %s",t,r),!(n instanceof Object))return;void 0!==n.id&&(f("%s recording scope %s",r,n.id),yield*l.scope(n.id,r,a,t,e));switch(n.nodeType){case"VariableDeclaration":f("%s recording variable %o",r,n),yield*l.declare(n,e);break;case"ContractDefinition":case"StructDefinition":case"EnumDefinition":f("%s recording type %o",r,n),yield*l.defineType(n,e)}}(e,t,n,r,i),Array.isArray(n))for(let[a,o]of n.entries())yield*p(e,t,o,`${r}/${a}`,i);else if(n&&"YulBlock"===n.nodeType)yield*function*(e,t,n,r,i){yield*function*e(t,n,r,i,o,s,c){if(yield*function*(e,t,n,r,a,i,o){if(f("entering %d %s",t,r),!n)return;void 0!==n.src&&(f("scoping!"),yield*l.yulScope(r,t,e,o));if("YulTypedName"===n.nodeType){let o=function e(t,n,r,a){f("pointer: %s",n),f("basePointer: %s",a);let i=n.slice(a.length);f("relativePointer: %s",i);let o=i.replace(/\/[^/]*$/,""),l=a+o;f("parentPointer: %s",l);let s=u.default.get(r,o);return"YulBlock"===t.nodeType?"YulForLoop"===s.nodeType&&n===l+"/pre"?l:n:"YulFunctionDefinition"===t.nodeType?n:e(s,l,r,a)}(n,r,a,i);yield*l.yulDeclare(n,r,o,t,e)}}(t,n,r,i,o,s,c),Array.isArray(r))for(let[a,l]of r.entries())yield*e(t,n,l,`${i}/${a}`,o,s);else if(r instanceof Object)for(let[l,c]of(0,a.default)(r))yield*e(t,n,c,`${i}/${l}`,o,s);yield*function*(e,t,n,r,a,i,o){f("exiting %d %s",t,r)}(0,n,0,i)}(e,t,n,r,n,r,i)}(e,t,n,r,i);else if(n instanceof Object)for(let[i,o]of(0,a.default)(n))yield*p(e,t,o,`${r}/${i}`,n.id);yield*function*(e,t,n,r){f("exiting %d %s",t,r)}(0,t,0,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),a=n(7),i=f(n(59)),o=f(n(60)),l=f(n(61)),s=f(n(62)),c=f(n(63)),u=f(n(64)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(14));function f(e){return e&&e.__esModule?e:{default:e}}const p=(0,r.default)("debugger:session:reducers");const y=(0,a.combineReducers)({ready:function(e=!1,t){switch(t.type){case d.READY:return p("readying"),!0;case d.WAIT:return!1;default:return e}},lastLoadingError:function(e=null,t){switch(t.type){case d.ERROR:return p("error: %o",t.error),t.error;case d.WAIT:return null;default:return e}},transaction:function(e={},t){switch(t.type){case d.SAVE_TRANSACTION:return t.transaction;case d.UNLOAD_TRANSACTION:return{};default:return e}},receipt:function(e={},t){switch(t.type){case d.SAVE_RECEIPT:return t.receipt;case d.UNLOAD_TRANSACTION:return{};default:return e}},block:function(e={},t){switch(t.type){case d.SAVE_BLOCK:return t.block;case d.UNLOAD_TRANSACTION:return{};default:return e}},lightMode:function(e=!1,t){switch(t.type){case d.SET_LIGHT_MODE:return!0;case d.SET_FULL_MODE:return!1;default:return e}}}),m=(0,a.combineReducers)({session:y,data:i.default,evm:o.default,solidity:l.default,stacktrace:u.default,trace:s.default,controller:c.default});t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(30)),a=p(n(15)),i=p(n(11)),o=p(n(2)),l=p(n(0)),s=n(7),c=f(n(29)),u=f(n(3)),d=n(1);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}const y=(0,l.default)("debugger:data:reducers"),m={byCompilationId:{}};const g={storage:{},memory:{},abi:{},state:{}};const b=(0,s.combineReducers)({scopes:function(e=m,t){let n,r,a;switch(t.type){case c.SCOPE:{const{compilationId:a,id:i,sourceId:l,parentId:s,pointer:c}=t,u=void 0!==i?i:(0,d.makePath)(l,c);return r={byCompilationId:(0,o.default)({},e.byCompilationId,{[a]:(0,o.default)({},e.byCompilationId[a])})},r.byCompilationId[a]=(0,o.default)({},r.byCompilationId[a],{byAstRef:(0,o.default)({},r.byCompilationId[a].byAstRef)}),n=r.byCompilationId[a].byAstRef[u],r.byCompilationId[a].byAstRef[u]=(0,o.default)({},n,{id:i,sourceId:l,parentId:s,pointer:c,compilationId:a}),r}case c.DECLARE:{let{compilationId:r,name:i,astRef:l,scopeAstRef:s}=t;return n=e.byCompilationId[r].byAstRef[s]||{},a=n.variables||[],{byCompilationId:(0,o.default)({},e.byCompilationId,{[r]:(0,o.default)({},e.byCompilationId[r],{byAstRef:(0,o.default)({},e.byCompilationId[r].byAstRef,{[s]:(0,o.default)({},n,{variables:[...a,{name:i,astRef:l,compilationId:r}]})})})})}}default:return e}},userDefinedTypes:function(e=[],t){switch(t.type){case c.DEFINE_TYPE:return[...e,{id:t.node.id,compilationId:t.compilationId}];default:return e}},allocations:function(e=g,t){return t.type===c.ALLOCATE?{storage:t.storage,memory:t.memory,abi:t.abi,calldata:t.calldata,state:t.state}:e}}),A=[[{builtin:"msg"},{location:"special",special:"msg"}],[{builtin:"tx"},{location:"special",special:"tx"}],[{builtin:"block"},{location:"special",special:"block"}],[{builtin:"this"},{location:"special",special:"this"}],[{builtin:"now"},{location:"special",special:"timestamp"}]].map(([e,t])=>(0,d.makeAssignment)(e,t)),T={byId:(0,i.default)({},...A.map(e=>({[e.id]:e}))),byCompilationId:{},byBuiltin:(0,i.default)({},...A.map(e=>({[e.builtin]:[e.id]})))};const E={byAddress:{}};const _=(0,s.combineReducers)({assignments:function(e=T,t){switch(t.type){case c.ASSIGN:case c.MAP_PATH_AND_ASSIGN:return y("action.type %O",t.type),y("action.assignments %O",t.assignments),(0,a.default)(t.assignments).reduce((e,t)=>{let{id:n,astRef:a,compilationId:i}=t;return(0,o.default)({},e,{byId:(0,o.default)({},e.byId,{[n]:t}),byCompilationId:(0,o.default)({},e.byCompilationId,{[i]:(0,o.default)({},e.byCompilationId[i],{byAstRef:(0,o.default)({},(e.byCompilationId[i]||{}).byAstRef,{[a]:[...new r.default([...((e.byCompilationId[i]||{}).byAstRef||{})[a]||[],n])]})})})})},e);case c.RESET:return T;default:return e}},mappedPaths:function(e=E,t){switch(t.type){case c.MAP_PATH_AND_ASSIGN:let{address:n,slot:r,typeIdentifier:a,parentType:i}=t;y("typeIdentifier %s",a),a=u.Ast.Utils.regularizeTypeIdentifier(a),i=u.Ast.Utils.regularizeTypeIdentifier(i),y("slot %o",r);let l=u.Conversion.toHexString(u.Storage.Utils.slotAddress(r),u.Evm.Utils.WORD_SIZE),s=r.path?u.Conversion.toHexString(u.Storage.Utils.slotAddress(r.path),u.Evm.Utils.WORD_SIZE):void 0,d=(0,o.default)({},e,{byAddress:(0,o.default)({},e.byAddress,{[n]:{byType:(0,o.default)({},(e.byAddress[n]||{byType:{}}).byType)}})});if(d.byAddress[n].byType=(0,o.default)({},d.byAddress[n].byType,{[a]:{bySlotAddress:(0,o.default)({},(d.byAddress[n].byType[a]||{bySlotAddress:{}}).bySlotAddress)}}),void 0===d.byAddress[n].byType[a].bySlotAddress[l]){let e;y("parentAddress %o",s),e=void 0!==s&&d.byAddress[n].byType[i]&&d.byAddress[n].byType[i].bySlotAddress[s]?(0,o.default)({},r,{path:d.byAddress[n].byType[i].bySlotAddress[s]}):r,d.byAddress[n].byType[a].bySlotAddress[l]=e}return d;case c.RESET:return E;default:return e}}}),v=(0,s.combineReducers)({info:b,proc:_});t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(2)),a=u(n(0)),i=n(7),o=c(n(31)),l=c(n(3)),s=u(n(17));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}const d=(0,a.default)("debugger:evm:reducers"),f={byContext:{}};const p=(0,i.combineReducers)({contexts:function(e=f,t){switch(t.type){case o.ADD_CONTEXT:const{context:n,contractName:a,binary:i,sourceMap:s,primarySource:c,immutableReferences:u,compiler:f,compilationId:p,abi:y,contractId:m,contractKind:g,isConstructor:b,externalSolidity:A}=t;return d("action %O",t),(0,r.default)({},e,{byContext:(0,r.default)({},e.byContext,{[n]:{context:n,contractName:a,context:n,binary:i,sourceMap:s,primarySource:c,immutableReferences:u,compiler:f,compilationId:p,abi:y,contractId:m,contractKind:g,isConstructor:b,externalSolidity:A,payable:l.AbiData.Utils.abiHasPayableFallback(y)}})});default:return e}}}),y={gasprice:new s.default(0),origin:l.Evm.Utils.ZERO_ADDRESS};const m={coinbase:l.Evm.Utils.ZERO_ADDRESS,difficulty:new s.default(0),gaslimit:new s.default(0),number:new s.default(0),timestamp:new s.default(0)};const g=(0,i.combineReducers)({tx:function(e=y,t){switch(t.type){case o.SAVE_GLOBALS:let{gasprice:n,origin:r}=t;return{gasprice:n,origin:r};case o.UNLOAD_TRANSACTION:return y;default:return e}},block:function(e=m,t){switch(t.type){case o.SAVE_GLOBALS:return t.block;case o.UNLOAD_TRANSACTION:return m;default:return e}}});const b=(0,i.combineReducers)({globals:g,status:function(e=null,t){switch(t.type){case o.SAVE_STATUS:return t.status;case o.UNLOAD_TRANSACTION:return null;default:return e}},initialCall:function(e=null,t){switch(t.type){case o.CALL:case o.CREATE:return null!==e?e:t;case o.UNLOAD_TRANSACTION:return null;default:return e}}});const A=[{accounts:{}}];const T=(0,i.combineReducers)({callstack:function(e=[],t){switch(t.type){case o.CALL:{const{address:n,data:r,storageAddress:a,sender:i,value:o}=t;return e.concat([{address:n,data:r,storageAddress:a,sender:i,value:o}])}case o.CREATE:{const{binary:n,storageAddress:r,sender:a,value:i}=t;return e.concat([{binary:n,data:"0x",storageAddress:r,sender:a,value:i}])}case o.RETURN_CALL:case o.RETURN_CREATE:case o.FAIL:return e.length>1?e.slice(0,-1):e;case o.RESET:case o.UNLOAD_TRANSACTION:return[];default:return e}},codex:function(e=A,t){let n,a;const i=(e,t,n,a)=>(0,r.default)({},e,{accounts:(0,r.default)({},e.accounts,{[t]:(0,r.default)({code:"0x",context:null},e.accounts[t],{storage:(0,r.default)({},(e.accounts[t]||{}).storage,{[n]:a})})})}),s=(e,t,n,a)=>{let i=e.accounts[t]||{storage:{}};return(0,r.default)({},e,{accounts:(0,r.default)({},e.accounts,{[t]:(0,r.default)({},i,{code:n,context:a})})})},c=e=>e.length>2?e.slice(0,-2).concat([e[e.length-1]]):e;switch(t.type){case o.CALL:return d("call action"),d("codex: %O",e),[...e,e[e.length-1]];case o.CREATE:return d("create action"),n=[...e,e[e.length-1]],a=n[n.length-1],void 0!==a.accounts[t.storageAddress]||t.storageAddress===l.Evm.Utils.ZERO_ADDRESS?n:(n[n.length-1]=(0,r.default)({},a,{accounts:(0,r.default)({},a.accounts,{[t.storageAddress]:{storage:{},code:"0x",context:null}})}),n);case o.STORE:{d("store action");const{address:r,slot:o,value:s}=t;return r===l.Evm.Utils.ZERO_ADDRESS?e:(n=e.slice(),a=n[n.length-1],n[n.length-1]=i(a,r,o,s),n)}case o.LOAD:{d("load action");const{address:n,slot:r,value:o}=t;return n===l.Evm.Utils.ZERO_ADDRESS?e:(a=e[e.length-1],void 0!==a.accounts[n].storage[r]?e:e.map(e=>i(e,n,r,o)))}case o.RETURN_CALL:return d("return from call"),c(e);case o.RETURN_CREATE:{d("return from create");const{address:r,code:a,context:i}=t;return n=e.slice(),n[n.length-1]=s(n[n.length-1],r,a,i),d("newState: %O",n),c(n)}case o.FAIL:return d("fail action"),(u=e).length>2?u.slice(0,-1):u;case o.RESET:return d("reset action"),[e[0]];case o.UNLOAD_TRANSACTION:return d("unload action"),A;case o.ADD_INSTANCE:{d("adding instance");const{address:n,binary:r,context:a}=t;return e.map(e=>s(e,n,r,a))}default:return e}var u}}),E=(0,i.combineReducers)({info:p,transaction:b,proc:T});t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(6)),a=s(n(11)),i=s(n(2)),o=n(7),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(37));function s(e){return e&&e.__esModule?e:{default:e}}const c={byCompilationId:{}};const u=(0,o.combineReducers)({sources:function(e=c,t){switch(t.type){case l.ADD_SOURCES:return{byCompilationId:(0,i.default)({},e.byCompilationId,(0,a.default)({},...(0,r.default)(t.compilations).map(([e,t])=>({[e]:{byId:t}}))))};default:return e}}});const d=(0,o.combineReducers)({functionDepthStack:function(e=[],t){switch(t.type){case l.JUMP:let r=e.slice();const a="i"===(n=t.jumpDirection)?1:"o"===n?-1:0;let i=r[r.length-1],o=r.length>1?r[r.length-2]:-1;return r[r.length-1]=Math.max(i+a,o+1),r;case l.RESET:return[0];case l.UNLOAD_TRANSACTION:return[];case l.EXTERNAL_CALL:return 0===e.length?[0]:[...e,e[e.length-1]+1];case l.EXTERNAL_RETURN:return e.length>1?e.slice(0,-1):e;default:return e}var n},nextFrameIsPhantom:function(e=null,t){switch(t.type){case l.CLEAR_PHANTOM_GUARD:case l.EXTERNAL_RETURN:return!1;case l.EXTERNAL_CALL:case l.RESET:return t.guard;case l.UNLOAD_TRANSACTION:return null;default:return e}}}),f=(0,o.combineReducers)({info:u,proc:d});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r},o=n(7),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(12));const s=(0,i.default)("debugger:trace:reducers");const c=(0,o.combineReducers)({steps:function(e=null,t){switch(t.type){case l.SAVE_STEPS:return t.steps;case l.UNLOAD_TRANSACTION:return s("unloading"),null;default:return e}}}),u=(0,o.combineReducers)({index:function(e=0,t){switch(t.type){case l.TOCK:return e+1;case l.RESET:case l.UNLOAD_TRANSACTION:return 0;default:return e}},finished:function(e=!1,t){switch(t.type){case l.END_OF_TRACE:return!0;case l.RESET:case l.UNLOAD_TRANSACTION:return!1;default:return e}}}),d=(0,o.combineReducers)({submoduleCount:function(e=0,t){switch(t.type){case l.SET_SUBMODULE_COUNT:return t.count;default:return e}}}),f=(0,o.combineReducers)({transaction:c,proc:u,application:d});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r},o=n(7),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(20));const s=(0,i.default)("debugger:controller:reducers");const c=(0,o.combineReducers)({breakpoints:function(e=[],t){switch(t.type){case l.ADD_BREAKPOINT:return e.filter(e=>e.compilationId===t.breakpoint.compilationId&&e.sourceId===t.breakpoint.sourceId&&e.line===t.breakpoint.line&&e.node===t.breakpoint.node).length>0?e:e.concat([t.breakpoint]);case l.REMOVE_BREAKPOINT:return e.filter(e=>e.compilationId!==t.breakpoint.compilationId||e.sourceId!==t.breakpoint.sourceId||e.line!==t.breakpoint.line||e.node!==t.breakpoint.node);case l.REMOVE_ALL_BREAKPOINTS:return[];default:return e}},isStepping:function(e=!1,t){switch(t.type){case l.START_STEPPING:return s("got step start action"),!0;case l.DONE_STEPPING:return s("got step stop action"),!1;default:return e}}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r},o=n(7),l=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(39));(0,i.default)("debugger:stacktrace:reducers");const c=(0,o.combineReducers)({callstack:function(e=[],t){let n;switch(t.type){case s.JUMP_IN:let{location:r,functionNode:a,contractNode:i}=t;return n={type:"internal",calledFromLocation:r,address:e[e.length-1].address,functionName:!a||"FunctionDefinition"!==a.nodeType&&"YulFunctionDefinition"!==a.nodeType?void 0:a.name,contractName:i&&"ContractDefinition"===i.nodeType?i.name:void 0},[...e,n];case s.JUMP_OUT:let o=e[e.length-1];return o&&"internal"===o.type?e.slice(0,-1):e;case s.EXTERNAL_CALL:return n={type:"external",address:t.address,calledFromLocation:t.location,functionName:void 0,contractName:t.context.contractName},[...e,n];case s.EXECUTE_RETURN:return(0,l.popNWhere)(e,t.counter,e=>"external"===e.type);case s.RESET:return[e[0]];case s.UNLOAD_TRANSACTION:return[];default:return e}},returnCounter:function(e=0,t){switch(t.type){case s.EXTERNAL_RETURN:return e+1;case s.EXECUTE_RETURN:case s.RESET:case s.UNLOAD_TRANSACTION:return 0;default:return e}},lastPosition:function(e=null,t){switch(t.type){case s.JUMP_IN:case s.JUMP_OUT:case s.ETERNAL_CALL:case s.EXTERNAL_RETURN:case s.UPDATE_POSITION:case s.EXECUTE_RETURN:const{location:n}=t;return void 0===n.source.id?e:n;case s.RESET:case s.UNLOAD_TRANSACTION:return null;default:return e}},innerReturnPosition:function(e=null,t){switch(t.type){case s.EXTERNAL_RETURN:return e||t.from;case s.EXECUTE_RETURN:case s.RESET:case s.UNLOAD_TRANSACTION:return null;default:return e}},innerReturnStatus:function(e=null,t){switch(t.type){case s.EXTERNAL_RETURN:return null===e?t.status:e;case s.EXECUTE_RETURN:case s.RESET:case s.UNLOAD_TRANSACTION:return null;default:return e}}}),u=(0,o.combineReducers)({proc:c});t.default=u},function(e,t){e.exports=require("@truffle/compile-solidity/legacy/shims")}])}));
//# sourceMappingURL=debugger.js.map